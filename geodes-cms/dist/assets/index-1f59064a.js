(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function Ke(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ke=function(e){return typeof e}:Ke=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ke(n)}function Ns(n,e){return Is(n)||Cs(n,e)||mn(n,e)||xs()}function hn(n){return Ts(n)||_s(n)||mn(n)||Ls()}function Ts(n){if(Array.isArray(n))return Et(n)}function Is(n){if(Array.isArray(n))return n}function _s(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function Cs(n,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var t=[],s=!0,i=!1,r=void 0;try{for(var a=n[Symbol.iterator](),o;!(s=(o=a.next()).done)&&(t.push(o.value),!(e&&t.length===e));s=!0);}catch(l){i=!0,r=l}finally{try{!s&&a.return!=null&&a.return()}finally{if(i)throw r}}return t}}function mn(n,e){if(n){if(typeof n=="string")return Et(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Et(n,e)}}function Et(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,s=new Array(e);t<e;t++)s[t]=n[t];return s}function Ls(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oe(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return t?bn(n)?e:n:j(n)?e:n}function $s(n){return Qe(n)&&n.length===0}function Lt(n){return typeof n=="string"||n instanceof String}function H(n){return typeof n=="function"}function yn(n){return!j(n)&&Ke(n)==="object"}function Qe(n){return!j(n)&&typeof n[Symbol.iterator]=="function"}function gn(n){return Qe(n)&&!Lt(n)}function Ce(n){return n===null}function We(n){return!n||Lt(n)&&(n.length===0||/^\s*$/.test(n))}function bn(n){return typeof n>"u"}function j(n){return Ce(n)||bn(n)}var Ms=Object.prototype.hasOwnProperty,xt=function(e,t){return Ms.call(e,t)};function Ps(n){return We(n)?n:n.toLowerCase().replace(/\b\w/g,function(e){return e.toUpperCase()})}function js(n){if(We(n))return n;var e=n.replace(/[_-]+/g," ").replace(/\s+/g," ").trim();return Ps(e).replace(/\s+/g,"")}var wn=function(e){return!j(e)&&e.nodeType===Node.ELEMENT_NODE},Bs=function(e){return!j(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE},Qt=function(e){return e instanceof Node},kn=function(e){return wn(e)&&e instanceof Element},M=function(e,t){return wn(e)&&e instanceof HTMLElement?Qe(t)?qs(e,Array.isArray(t)?t:[t]):!0:!1},Wt={a:"Anchor",br:"BR",dl:"DList",datalist:"DataList",fieldset:"FieldSet",frameset:"FrameSet",hr:"HR",h1:"Heading",h2:"Heading",h3:"Heading",h4:"Heading",h5:"Heading",h6:"Heading",li:"LI",ol:"OList",optgroup:"OptGroup",p:"Paragraph",q:"Quote",blockquote:"Quote",caption:"TableCaption",td:"TableCell",th:"TableCell",col:"TableCol",tr:"TableRow",tbody:"TableSection",thead:"TableSection",tfoot:"TableSection",textarea:"TextArea",ul:"UList"};function qs(n,e){var t=function(a){return n instanceof a},s=function(a){return n.tagName===a.toUpperCase()},i=function(a){return Array.isArray(a)?a.includes(n.type):n.type===a};return e.some(function(r){if(!Qe(r))return!1;var a=r,o=null;if(Array.isArray(r)){var l=Ns(r,2);a=l[0],o=l[1]}a=a.toLowerCase();var c="HTML".concat(xt(Wt,a)?Wt[a]:js(a),"Element");return t(window[c])||s(a)?gn(o)&&!$s(o)?i(o):!0:!1})}var Ds=function(e){return e instanceof HTMLCollection},$t=function(e){return Bs(e)&&e instanceof DocumentFragment};function Sn(n,e){if(!Lt(e))return null;var t=document.createElement("template");return t.innerHTML=e.trim(),t.content[n]}Sn.bind(null,"firstChild");Sn.bind(null,"childNodes");function Rs(n,e){if(!Qt(n))throw new TypeError("Bad argument: The given `parent` is not a valid Node");if(!(Ds(e)||gn(e)))throw new TypeError("Bad argument: The given `children` is not a valid HTMLCollection/HTMLElement array");var t=function(r){return document.createTextNode(r.toString())},s=$t(n)?n:document.createDocumentFragment();return Array.from(e).forEach(function(i){j(i)||s.appendChild(Qt(i)?i:t(i.toString()))}),n!==s&&n.appendChild(s),n}function Ks(n,e){var t;if(!M(n))throw new Error("Bad argument: The passed `element` argument is not a valid HTML Element");return(t=n.classList).add.apply(t,hn(Array.isArray(e)?e:[e])),n}function y(n,e,t){n[e]=t}function Fs(n,e,t){Object.assign(n[e],t)}function Xt(n,e,t){n.setAttribute(e,t)}var Us="accesskey,autocapitalize,class,dataset,editable,draggable,hidden,id,inputmode,lang,html,style,tabindex,text,title",Vs={accesskey:[y,"accessKey"],autocapitalize:[y,"autocapitalize"],class:[Ks],dataset:[Fs,"dataset"],draggable:[y,"draggable"],editable:[y,"contentEditable"],hidden:[y,"hidden"],id:[y,"id"],inputmode:[y,"inputMode"],lang:[y,"lang"],html:[y,"innerHTML"],style:[y,"style"],tabindex:[y,"tabIndex"],text:[y,"textContent"],title:[y,"title"],data:[y,"data"],cite:[y,"cite"],download:[y,"download"],ping:[y,"ping"],target:[y,"target"],coords:[y,"coords"],shape:[y,"shape"],autoplay:[y,"autoplay"],buffered:[y,"buffered"],controls:[y,"controls"],loop:[y,"loop"],muted:[y,"muted"],playsinline:[Xt,"playsinline"],poster:[y,"poster"],preload:[y,"preload"],crossorigin:[y,"crossOrigin"],decoding:[y,"decoding"],height:[y,"height"],ismap:[y,"isMap"],loading:[y,"loading"],srcset:[y,"srcset"],width:[y,"width"],alt:[y,"alt"],as:[y,"as"],media:[y,"media"],rel:[y,"rel"],src:[y,"src"],sizes:[y,"sizes"],reversed:[y,"reversed"],start:[y,"start"],accept:[y,"accept"],"accept-charset":[y,"acceptCharset"],action:[y,"action"],autocomplete:[y,"autocomplete"],autofocus:[y,"autofocus"],capture:[y,"capture"],checked:[y,"checked"],cols:[y,"cols"],disabled:[y,"disabled"],dirname:[y,"dirName"],enctype:[y,"enctype"],for:[y,"for"],form:[y,"form"],formaction:[y,"formAction"],formenctype:[y,"formEnctype"],formmethod:[y,"formMethod"],formnovalidate:[y,"formNoValidate"],formtarget:[y,"formTarget"],high:[y,"high"],label:[y,"label"],list:[y,"list"],low:[y,"low"],max:[y,"max"],maxlength:[y,"maxLength"],method:[y,"method"],min:[y,"min"],minlength:[y,"minLength"],multiple:[y,"multiple"],name:[y,"name"],novalidate:[y,"noValidate"],optimum:[y,"optimum"],pattern:[y,"pattern"],placeholder:[y,"placeholder"],readonly:[y,"readOnly"],required:[y,"required"],rows:[y,"rows"],selected:[y,"selected"],size:[y,"size"],spellcheck:[Xt,"spellcheck"],step:[y,"step"],wrap:[y,"wrap"],default:[y,"default"],kind:[y,"kind"],srclang:[y,"srclang"],abbr:[y,"abbr"],colspan:[y,"colSpan"],span:[y,"span"],rowspan:[y,"rowSpan"],scope:[y,"scope"],href:[y,"href"],hreflang:[y,"hreflang"],datetime:[y,"dateTime"],type:[y,"type"],value:[y,"value"],usemap:[y,"useMap"]};function Hs(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";if(!M(n))throw new Error("Bad argument: The given element argument is not a valid HTML Element");if(!yn(e))return n;for(var s=function(u){return Us.includes(u)||t.includes(u)},i=0,r=Object.keys(e);i<r.length;i++){var a=r[i];if(s(a)){var o=e[a],l=Vs[a].slice(0),c=l.shift();c.apply(void 0,[n].concat(hn(l),[o]))}}return n}function R(n,e,t){var s=document.createElement(n);return M(s)?(yn(t)&&Hs(s,t,oe(e,"")),s):null}function w(n,e,t,s){var i=R(n,e,t);return M(i)?(j(s)||An(i,s),i):null}function z(n,e,t,s,i){var r=R(n,e,s);return M(r)?(j(i)||An(r,i,t),r):null}R.bind(null,"link","as,crossorigin,disabled,href,hreflang,media,rel,sizes,type");w.bind(null,"template","");w.bind(null,"header","");w.bind(null,"footer","");w.bind(null,"main","");w.bind(null,"article","");w.bind(null,"section","");w.bind(null,"nav","");w.bind(null,"aside","");w.bind(null,"h1","");w.bind(null,"h2","");w.bind(null,"h3","");w.bind(null,"h4","");w.bind(null,"h5","");w.bind(null,"h6","");w.bind(null,"div","");w.bind(null,"object","data,height,name,type,usemap,width");R.bind(null,"embed","height,src,type,width");R.bind(null,"br","");R.bind(null,"hr","");w.bind(null,"p","");w.bind(null,"blockquote","cite");var vn=function(e){return M(e,"li")?e:Gs(null,e)};z.bind(null,"ul","",vn);z.bind(null,"ol","reversed,start,type",vn);var Gs=w.bind(null,"li","value");w.bind(null,"dl","");w.bind(null,"dt","");w.bind(null,"dd","");w.bind(null,"a","download,href,hreflang,ping,rel,target,type");R.bind(null,"area","alt,coords,download,href,hreflang,media,ping,rel,shape,target");R.bind(null,"base","href,target");R.bind(null,"img","alt,crossorigin,decoding,height,ismap,loading,sizes,src,srcset,usemap,width");w.bind(null,"audio","autoplay,controls,crossorigin,loop,muted,preload,src");w.bind(null,"video","autoplay,controls,crossorigin,height,loop,muted,playsinline,poster,preload,src,width");R.bind(null,"source","media,sizes,src,srcset,type");R.bind(null,"track","default,kind,label,src,srclang");w.bind(null,"picture","");w.bind(null,"figure","");w.bind(null,"figcaption","");w.bind(null,"span","");w.bind(null,"strong","");w.bind(null,"em","");w.bind(null,"mark","");w.bind(null,"samp","");w.bind(null,"sub","");w.bind(null,"sup","");w.bind(null,"del","cite,datetime");w.bind(null,"ins","cite,datetime");w.bind(null,"q","cite");w.bind(null,"abbr","");w.bind(null,"b","");w.bind(null,"i","");w.bind(null,"s","");w.bind(null,"u","");w.bind(null,"cite","");w.bind(null,"time","datetime");w.bind(null,"code","");w.bind(null,"form","accept-charset,action,autocomplete,enctype,method,name,novalidate,rel,target");R.bind(null,"input","accept,alt,autocomplete,autofocus,capture,checked,dirname,disabled,height,max,maxlength,minlength,min,multiple,name,pattern,placeholder,readonly,required,size,src,step,type,value,width");w.bind(null,"textarea","autocomplete,autofocus,cols,disabled,maxlength,minlength,name,placeholder,readonly,required,rows,spellcheck,value,wrap");w.bind(null,"label","for");var Js=function(e){return M(e,["option","optgroup"])?e:Array.isArray(e)?zs(null,e):En(null,e)};z.bind(null,"select","autocomplete,autofocus,disabled,multiple,name,required,size",Js);var En=w.bind(null,"option","disabled,label,selected,value"),On=function(e){return M(e,"option")?e:En(null,e)},zs=z.bind(null,"optgroup","disabled,label",On);w.bind(null,"fieldset","disabled,name");w.bind(null,"legend","");z.bind(null,"datalist","",On);w.bind(null,"meter","high,low,max,min,optimum,value");w.bind(null,"progress","max,value");w.bind(null,"output","name,value");w.bind(null,"button","autofocus,disabled,formaction,formenctype,formmethod,formnovalidate,formtarget,name,type,value");w.bind(null,"table","");w.bind(null,"caption","");var Mt=function(e){return M(e,"tr")?e:Ws(null,e)};z.bind(null,"thead","",Mt);z.bind(null,"tbody","",Mt);z.bind(null,"tfoot","",Mt);R.bind(null,"col","span");var Ys=function(e){return M(e,"col")?e:null};z.bind(null,"colgroup","span",Ys);var Qs=function(e){return M(e,["th","td"])?e:Xs(null,e)},Ws=z.bind(null,"tr","",Qs);w.bind(null,"th","abbr,colspan,rowspan,scope");var Xs=w.bind(null,"td","colspan,rowspan");function An(n,e,t){var s=Array.isArray(e)?e:[e];return H(t)&&(s=s.map(function(i){return t(i)})),Rs(n,s),n}var Nn=function(e){return/^\.[a-zA-Z0-9_-]+$/.test(e)},Zs=function(e){return/^#[a-zA-Z0-9_-]+$/.test(e)};function Tn(n,e){var t=oe(e,document);return We(n)?null:$t(t)?t.querySelector(n):Zs(n)?document.getElementById(n.substring(1)):Nn(n)?t.getElementsByClassName(n.substring(1))[0]:t.querySelector(n)}function ei(n,e){var t=oe(e,document);return We(n)?null:$t(t)?t.querySelectorAll(n):Nn(n)?t.getElementsByClassName(n.substring(1)):t.querySelectorAll(n)}function In(n,e,t){if(!M(e))return null;var s=e[n];if(H(t))for(;kn(s)&&!t(s);)s=s[n];return s}In.bind(null,"previousElementSibling");In.bind(null,"nextElementSibling");function ti(n,e,t){if(!kn(n))throw new TypeError("Bad argument: The given target parameter is not a valid HTML Element");if(!H(e))throw new TypeError("Bad argument: The given pred parameter is not a valid Function");var s=n.parentElement;return t>0?Cn(s,e,t-1):_n(s,e)}function _n(n,e){return j(n)?null:e(n)?n:_n(n.parentElement,e)}function Cn(n,e,t){return j(n)||t===0?null:e(n)?n:Cn(n.parentElement,e,t-1)}var Ln="state",ni="checked",si="unchecked",xn=function(e){return e.dataset[Ln]},$n=function(e,t){return e.dataset[Ln]=t},Ot=function(e,t){return $n(e,oe(t,ni))},Mn=function(e,t){return $n(e,oe(t,si))},ii={name:"selector",container:null,items:null,selectedIndex:null,selectedItem:null,beforeChange:null,afterChange:null,get value(){return this.selectedItem.value},setSelectedItem:function(e){return this.items.includes(e)?(this.selectedItem&&this.selectedItem.setChecked(!1),this.selectedItem=e,this.selectedItem.setChecked(!0),!0):null},init:function(){for(var e=this.container.dataset.value,t=null,s=0;s<this.items.length;s++){var i=this.items[s];i.isChecked()&&this.setSelectedItem(i),i.value===e&&(t=i)}return Ce(this.selectedItem)&&!Ce(t)&&this.setSelectedItem(t),this.bindEvents(),this},bindEvents:function(){var e=this;this.container.addEventListener("click",function(t){var s=t.target;if(xt(s.dataset,"selector")){var i=!1;if(H(e.beforeChange)&&(i=e.beforeChange(e,t)===!1),!i){var r=e.items.find(function(a){return a.index===+oe(s.dataset.selectorIndex,-1)});j(r)||(e.setSelectedItem(r),H(e.afterChange)&&e.afterChange(e,t))}}})}},ri={name:"form-selector",container:null,items:null,selectedIndex:null,selectedItem:null,beforeChange:null,afterChange:null,get value(){return this.selectedItem.value},setSelectedItem:function(e){return this.items.includes(e)?(this.selectedItem&&this.selectedItem.setChecked(!1),this.selectedItem=e,this.selectedItem.setChecked(!0),!0):null},init:function(){for(var e=this.container.dataset.value,t=null,s=0;s<this.items.length;s++){var i=this.items[s];i.isChecked()&&this.setSelectedItem(i),i.value===e&&(t=i)}return Ce(this.selectedItem)&&!Ce(t)&&this.setSelectedItem(t),this.bindEvents(),this},bindEvents:function(){var e=this;this.container.addEventListener("change",function(t){var s=t.target,i=!1;if(H(e.beforeChange)&&(i=e.beforeChange(e,t)===!1),i){s.checked=!1,e.items[e.selectedIndex].setChecked(!0);return}var r=e.items.find(function(a){return a.index===+oe(s.dataset.selectorIndex,-1)});j(r)||(e.setSelectedItem(r),H(e.afterChange)&&e.afterChange(e,t))})}},Zt=function(e){return'[data-type="'.concat(e.name,'"]')};Zt(ii),Zt(ri);var se={ON:"on",OFF:"off"},en=function(e){return'[data-type="'.concat(e.name,'"]')},ai={name:"switch",container:null,beforeChange:null,afterChange:null,get value(){return this.container.dataset.value},isChecked:function(){return xn(this.container)===se.ON},setChecked:function(e){return j(e)?!1:(e?Ot(this.container,se.ON):Mn(this.container,se.OFF),!0)},toggle:function(){this.isChecked()?this.setChecked(!1):this.setChecked(!0)},init:function(e){return Object.assign(this,e),this.isChecked()&&Ot(this.container,se.ON),this.bindEvents(),this},bindEvents:function(){var e=this;this.container.addEventListener("click",function(t){var s=!1;H(e.beforeChange)&&(s=e.beforeChange(e,t)===!1),!s&&(e.toggle(),H(e.afterChange)&&e.afterChange(e,t))})}},oi={name:"form-switch",container:null,input:null,beforeChange:null,afterChange:null,get value(){return this.input.value},isChecked:function(){return xn(this.container)===se.ON},setChecked:function(e){return j(e)?!1:(this.input.checked=e,e?Ot(this.container,se.ON):Mn(this.container,se.OFF),!0)},toggle:function(){this.isChecked()?this.setChecked(!1):this.setChecked(!0)},init:function(e){return Object.assign(this,e),this.input.checked&&this.setChecked(!0),this.bindEvents(),this},bindEvents:function(){var e=this;this.input.addEventListener("change",function(t){var s=!1;if(H(e.beforeChange)&&(s=e.beforeChange(e,t)===!1),s){e.input.checked=!e.input.checked;return}e.toggle(),H(e.afterChange)&&e.afterChange(e,t)})}};[en(ai),en(oi)].join(",");const li=[{name:"person",nature:"concrete",root:!0,attributes:[{name:"first-name",target:{name:"name",properties:[{name:"label",type:"string",value:"First name"}]},required:!0},{name:"last-name",target:{name:"name",properties:[{name:"label",type:"string",value:"Last name"}]},required:!0},{name:"email",target:{name:"email",properties:[{name:"label",type:"string",value:"Email address"}]},required:!0},{name:"website",target:{name:"string",properties:[{name:"label",type:"string",value:"Website"}]},required:!0},{name:"phone",target:{name:"phone",properties:[{name:"label",type:"string",value:"Phone number"}]},required:!0},{name:"position",target:{name:"string",properties:[{name:"label",type:"string",value:"Position"}]},required:!0},{name:"occupation",target:{name:"string",properties:[{name:"label",type:"string",value:"Occupation"}]},required:!0},{name:"photo",target:{name:"string",properties:[{name:"label",type:"string",value:"Photo URL"}]},required:!1},{name:"address",target:{name:"address"},required:!1},{name:"birth-date",target:{name:"string",properties:[{name:"label",type:"string",value:"Birthdate"}]},required:!1},{name:"affiliations",target:{name:"set",accept:{name:"affiliation"}},required:!1}],properties:[]},{name:"affiliation",nature:"concrete",root:!1,attributes:[{name:"name",target:{name:"string"},required:!0},{name:"role",target:{name:"string"},required:!0}],properties:[]},{name:"name",nature:"derivative",root:!1,base:"string",constraint:{length:{type:"range",range:{min:{value:1}}}}},{name:"email",nature:"derivative",root:!1,base:"string",constraint:{length:{type:"range",range:{min:{value:5},max:{value:255}}}}},{name:"phone",nature:"derivative",root:!1,base:"string",constraint:{value:{type:"pattern",pattern:{insensitive:!0,global:!0,value:"^\\(?([0-9]{3})\\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$"}}}}],ci={concept:li},ui=[{concept:{prototype:"organization"},tags:["people"],container:{content:[{type:"container",content:[{kind:"static",type:"text",content:"Members",style:{css:["pp-title"]}},{kind:"static",type:"button",name:"add-member",action:{type:"CREATE",target:{type:"attribute",name:"members"}},help:"Add a member",content:[{kind:"static",type:"text",content:"+",style:{css:["pp__btn-add-icon"]}},{kind:"static",type:"text",content:"New",style:{css:["pp__btn-add-text"]}}],style:{css:["btn","pp__btn-add"],ref:["box-left"]}}],layout:{type:"flex",orientation:"row"},style:{css:["pp-wrap"],ref:["box-top"]}},{type:"attribute",name:"members",tag:"view-table",style:{ref:["box-top"]}}],layout:{type:"flex",orientation:"column",wrappable:!1},style:{css:["pp-organization"]},focusable:!0}},{concept:{name:"person"},tags:["table-view","table-view--read"],container:{content:[{type:"attribute",name:"first-name",tag:"text"},{type:"attribute",name:"last-name",tag:"text",style:{text:{transform:"uppercase"},ref:["box-left"]}},{type:"attribute",name:"occupation",tag:"text"},{type:"attribute",name:"website",tag:"url"},{type:"attribute",name:"email",tag:"email"},{type:"attribute",name:"phone",tag:"text",style:{css:["phone"]}},{kind:"static",type:"plink",tag:"table-view--edit",content:[],style:{css:["pp__btn-edit"]}}],layout:{type:"flex",orientation:"row"},style:{css:["pp-person","pp-person--row","read"]},focusable:!0}},{concept:{name:"person"},tags:["table-view","table-view--edit"],container:{content:[{type:"attribute",name:"first-name",tag:"textbox",options:{placeholder:"First name"}},{type:"attribute",name:"last-name",tag:"textbox",options:{placeholder:"Last name"}},{type:"attribute",name:"occupation",tag:"textbox",options:{placeholder:"Occupation"}},{type:"attribute",name:"website",tag:"textbox",options:{placeholder:"URL"}},{type:"attribute",name:"email",options:{placeholder:"Email address"},tag:"textbox"},{type:"attribute",name:"phone",tag:"textbox",options:{placeholder:"Phone number"},style:{css:["phone"]}},{kind:"static",type:"plink",tag:"table-view--read",content:[{type:"raw",raw:"Done!"}],style:{css:["pp-navlink"]}}],layout:{type:"flex",orientation:"row"},style:{css:["pp-person","pp-person--row"]},focusable:!0}},{concept:{name:"person"},tags:["card-view","card-view--read"],container:{content:[{type:"container",content:[{type:"attribute",name:"photo",tag:"image"}],layout:{type:"flex",orientation:"row",wrappable:!0},style:{css:["pp-person-image"]}},{type:"container",content:[{type:"container",content:[{type:"attribute",name:"first-name",tag:"text",style:{css:["first-name"]}},{type:"attribute",name:"last-name",tag:"text",style:{text:{transform:"uppercase"},box:{outer:{left:{value:3,unit:"px"}}}}}],layout:{type:"flex",orientation:"row",wrappable:!0},style:{css:["pp-combi-name"]}},{type:"attribute",name:"occupation",tag:"text",style:{text:{bold:500}}},{type:"attribute",name:"email",tag:"email"},{type:"attribute",name:"phone",tag:"text"},{kind:"static",type:"plink",tag:"card-view--edit",content:[],style:{css:["pp__btn-edit"]}}],layout:{type:"flex",orientation:"column"},style:{css:["pp-person-info"]}}],layout:{type:"flex",orientation:"column"},style:{css:["pp-person","pp-person--read"]},focusable:!0}},{concept:{name:"person"},tags:["card-view","card-view--edit"],container:{content:[{type:"container",content:[{type:"attribute",name:"first-name",tag:"textbox-label"},{type:"attribute",name:"last-name",tag:"textbox-label",style:{ref:["box-left"]}}],layout:{type:"flex",orientation:"row",wrappable:!1},style:{css:["pp-fieldgroup"]}},{type:"attribute",name:"occupation",tag:"textbox-label",style:{ref:["box-top"]}},{type:"attribute",name:"email",tag:"textbox-label",style:{ref:["box-top"]}},{type:"attribute",name:"phone",tag:"textbox-label",style:{ref:["box-top"]}},{type:"attribute",name:"photo",tag:"textbox-label",required:!0,style:{ref:["box-top"]}},{kind:"static",type:"plink",tag:"card-view--read",content:[{type:"raw",raw:"Done!"}],style:{ref:["box-top"],css:["pp-navlink"]}}],layout:{type:"flex",orientation:"column"},style:{css:["pp-person","pp-person--edit"]},focusable:!0}},{concept:{name:"set"},tags:["view-table"],type:"container",container:{content:[{type:"template",name:"tpl-view-options",param:[{name:"selected",value:"table"}]},{kind:"field",type:"list",list:{item:{template:{tag:"table-view"},style:{css:["pp-person-set__rowlist-item"]}},style:{css:["pp-person-set__rowlist"]}},action:{add:!1,remove:{content:[{kind:"static",type:"text",content:"✖"}],style:{css:["pp-person-set__btn-remove"]}}}}],layout:{type:"flex",orientation:"column"}}},{concept:{name:"set"},tags:["view-grid"],type:"container",container:{content:[{type:"template",name:"tpl-view-options",param:[{name:"selected",value:"grid"}]},{kind:"field",type:"list",list:{item:{template:{tag:"card-view"},style:{css:["pp-person-set__list-item"]}},style:{css:["pp-person-set__list"]}},action:{add:!1,remove:{content:[{kind:"static",type:"text",content:"✖"}],style:{css:["pp-person-set__btn-remove"]}}}}],layout:{type:"flex",orientation:"column"}}}],fi=[{type:"template",name:"tpl-view-options",param:[{name:"selected",type:"string"}],content:[{type:"container",content:[{kind:"static",type:"plink",tag:"view-table",content:[{kind:"static",type:"text",content:"Row",style:{css:["pp-viewnav__link-text"]}}],style:{css:["pp-viewnav__link","pp-viewnav__link--table"]}},{kind:"static",type:"plink",tag:"view-grid",content:[{kind:"static",type:"text",content:"Card",style:{css:["pp-viewnav__link-text"]}}],style:{css:["pp-viewnav__link","pp-viewnav__link--grid"]}}],style:{html:[{name:"view",value:{type:"param",name:"selected"}}],css:["pp-viewnav"]},layout:{type:"flex",orientation:"row"}}]}],pi=[{type:"style",name:"box-top",style:{box:{outer:{top:{value:6,unit:"px"}}}}},{type:"style",name:"box-right",style:{box:{outer:{right:{value:6,unit:"px"}}}}},{type:"style",name:"box-left",style:{box:{outer:{left:{value:6,unit:"px"}}}}}],di={projection:ui,template:fi,style:pi},hi=[{name:"organization",nature:"prototype",root:!0,attributes:[{name:"name",target:{name:"name",properties:[{name:"label",type:"string",value:"Name"}]},required:!0},{name:"description",target:{name:"string",properties:[{name:"label",type:"string",value:"Description"}]},required:!0},{name:"members",target:{name:"set",accept:{name:"person"}},required:!0},{name:"photo",target:{name:"string",properties:[{name:"label",type:"string",value:"Photo URL"}]},required:!1},{name:"address",target:{name:"address"},required:!1},{name:"email",target:{name:"email",properties:[{name:"label",type:"string",value:"Email"}]},required:!1},{name:"socials",target:{name:"set",accept:{name:"social"}}},{name:"website",target:{name:"string",properties:[{name:"label",type:"string",value:"Website"}]},required:!1},{name:"phone",target:{name:"phone",properties:[{name:"label",type:"string",value:"Phone"}]},required:!1}],properties:[]},{name:"default-organization",nature:"concrete",root:!0,prototype:"organization",attributes:[],properties:[]},{name:"research-organization",nature:"concrete",prototype:"organization",root:!0,attributes:[{name:"areas",target:{name:"set",accept:{name:"area"}}},{name:"projects",target:{name:"set",accept:{name:"project"}}},{name:"tools",target:{name:"set",accept:{name:"tool"}}}],properties:[]},{name:"social",nature:"concrete",root:!1,attributes:[{name:"name",target:{name:"string",src:["twitter","facebook","linkedin","youtube","instagram","tiktok"]},required:!0},{name:"handle",target:{name:"string"},required:!0}],properties:[]},{name:"area",nature:"concrete",root:!1,attributes:[{name:"title",target:{name:"string"},required:!0},{name:"description",target:{name:"string"},required:!1},{name:"tags",target:{name:"set",accept:{name:"string"}}}],properties:[]},{name:"address",nature:"concrete",root:!1,attributes:[{name:"street-address",target:{name:"string",properties:[{name:"label",type:"string",value:"Street address"}]},required:!0},{name:"locality",target:{name:"string",properties:[{name:"label",type:"string",value:"City"}]},required:!0},{name:"region",target:{name:"string",properties:[{name:"label",type:"string",value:"Province"}]},required:!0},{name:"country",target:{name:"name",properties:[{name:"label",type:"string",value:"Country"}]},required:!0},{name:"postal-code",target:{name:"string",properties:[{name:"label",type:"string",value:"Postal code"}]},required:!0}],properties:[]},{name:"name",nature:"derivative",root:!1,base:"string",constraint:{length:{type:"range",range:{min:{value:1}}}}},{name:"email",nature:"derivative",root:!1,base:"string",constraint:{length:{type:"range",range:{min:{value:5},max:{value:255}}}}},{name:"phone",nature:"derivative",root:!1,base:"string",constraint:{value:{type:"pattern",pattern:{insensitive:!0,global:!0,value:"^\\(?([0-9]{3})\\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$"}}}}],mi={concept:hi},yi=[{name:"tool",nature:"concrete",root:!0,attributes:[{name:"name",target:{name:"string",properties:[{name:"label",type:"string",value:"Name"}]},required:!0},{name:"description",target:{name:"string",properties:[{name:"label",type:"string",value:"Description"}]},required:!0},{name:"start-date",target:{name:"number",properties:[{name:"label",type:"string",value:"Start year"}]},required:!0},{name:"responsable",target:{name:"reference",accept:{name:"person"},properties:[{name:"label",type:"string",value:"URL"}]},required:!0},{name:"contributors",target:{name:"set",accept:{name:"partner"},properties:[{name:"label",type:"string",value:"Partners"}]},required:!0},{name:"active",target:{name:"boolean"},required:!0},{name:"url",target:{name:"string",properties:[{name:"label",type:"string",value:"URL"}]},required:!0},{name:"logo",target:{name:"string",properties:[{name:"label",type:"string",value:"Logo"}]},required:!1}],properties:[]}],gi={concept:yi},bi=[{concept:{prototype:"organization"},tags:["general"],container:{content:[{type:"container",content:[{type:"attribute",name:"name",tag:"textbox-label",style:{css:["pp-wrap-element","pp-wrap-element--2"]}},{type:"attribute",name:"email",tag:"textbox-label",required:!0,style:{css:["pp-wrap-element"]}},{type:"attribute",name:"website",tag:"textbox-label",required:!0,style:{css:["pp-wrap-element"]}}],style:{css:["pp-wrap"]},layout:{type:"flex",orientation:"row",wrappable:!1}},{type:"attribute",name:"description",tag:"textarea-label",style:{ref:["box-top"]}},{type:"container",content:[{kind:"static",type:"text",content:"Social media",style:{css:["pp-subtitle"]}},{kind:"static",type:"button",name:"add-area",action:{type:"CREATE",target:{type:"attribute",name:"socials"}},help:"Add a social account",content:[{kind:"static",type:"text",content:"+",style:{css:["pp__btn-add-icon"]}},{kind:"static",type:"text",content:"New",style:{css:["pp__btn-add-text"]}}],style:{css:["btn","pp__btn-add"],ref:["box-left"]}}],layout:{type:"flex",orientation:"row"},style:{css:["pp-wrap"],ref:["box-top"]}},{type:"attribute",name:"socials",tag:"areas",style:{css:["areas"],ref:["box-top"]}},{type:"container",content:[{kind:"static",type:"text",content:"Areas of research",style:{css:["pp-title"]}},{kind:"static",type:"button",name:"add-area",action:{type:"CREATE",target:{type:"attribute",name:"areas"}},help:"Add an area",content:[{kind:"static",type:"text",content:"+",style:{css:["pp__btn-add-icon"]}},{kind:"static",type:"text",content:"New",style:{css:["pp__btn-add-text"]}}],style:{css:["btn","pp__btn-add"],ref:["box-left"]}}],layout:{type:"flex",orientation:"row"},style:{css:["pp-wrap"],ref:["box-top"]}},{type:"attribute",name:"areas",tag:"areas",style:{css:["areas"],ref:["box-top"]}}],layout:{type:"flex",orientation:"column",wrappable:!1},style:{css:["pp-organization"]},focusable:!0}},{concept:{name:"address"},tags:[],container:{content:[{type:"container",content:[{type:"attribute",name:"street-address",tag:"textbox-label",style:{css:["pp-fieldgroup-element","pp-fieldgroup-element--3"]}},{type:"attribute",name:"locality",tag:"textbox-label",style:{css:["pp-fieldgroup-element"],ref:["box-left"]}},{type:"attribute",name:"region",tag:"textbox-label",style:{css:["pp-fieldgroup-element"],ref:["box-left"]}}],layout:{type:"flex",orientation:"row",wrappable:!1},style:{css:["pp-fieldgroup"]}},{type:"container",content:[{type:"attribute",name:"postal-code",tag:"textbox-label",style:{css:["pp-fieldgroup-element"]}},{type:"attribute",name:"country",tag:"textbox-label",style:{css:["pp-fieldgroup-element","pp-fieldgroup-element--3"],ref:["box-left"]}}],layout:{type:"flex",orientation:"row",wrappable:!1},style:{css:["pp-fieldgroup","pp-fieldgroup--50"]}}],layout:{type:"flex",orientation:"column"},style:{css:["pp-address"]},focusable:!0}},{concept:{name:"area"},tags:["edit-view"],container:{content:[{kind:"static",type:"text",content:"Area",style:{css:["pp-area-title"]}},{type:"attribute",name:"title",tag:"textbox",options:{placeholder:"Title"},style:{ref:["box-top"]}},{type:"attribute",name:"description",tag:"textarea",required:!0,style:{ref:["box-top"]}}],layout:{type:"flex",orientation:"column"},style:{css:["pp-area","pp-area--edit"]},focusable:!0}},{concept:{name:"social"},tags:["edit-view"],container:{content:[{type:"attribute",name:"name",tag:"textbox",options:{placeholder:"Media"},style:{css:["pp-social-name"]}},{type:"attribute",name:"handle",tag:"textbox",options:{placeholder:"Handle"},style:{css:["pp-social-handle"]}}],layout:{type:"flex",orientation:"row"},style:{css:["pp-social"]},focusable:!0}}],wi=[],ki=[{type:"style",name:"box-top",style:{box:{outer:{top:{value:6,unit:"px"}}}}},{type:"style",name:"box-right",style:{box:{outer:{right:{value:6,unit:"px"}}}}},{type:"style",name:"box-left",style:{box:{outer:{left:{value:6,unit:"px"}}}}}],Si={projection:bi,template:wi,style:ki},vi=[{name:"project",nature:"concrete",root:!0,attributes:[{name:"name",target:{name:"string",properties:[{name:"label",type:"string",value:"Name"}]},required:!0},{name:"description",target:{name:"string",properties:[{name:"label",type:"string",value:"Description"}]},required:!0},{name:"start-date",target:{name:"number",properties:[{name:"label",type:"string",value:"Start year"}]},required:!0},{name:"end-date",target:{name:"number",properties:[{name:"label",type:"string",value:"End year"}]},required:!0},{name:"partners",target:{name:"set",accept:{name:"partner"},properties:[{name:"label",type:"string",value:"Partners"}]},required:!0},{name:"funding",target:{name:"string",properties:[{name:"label",type:"string",value:"Funding"}]},required:!0},{name:"logo",target:{name:"string",properties:[{name:"label",type:"string",value:"Logo"}]},required:!1}],properties:[]},{name:"partner",nature:"concrete",root:!1,attributes:[{name:"name",target:{name:"name",properties:[{name:"label",type:"string",value:"Name"}]},required:!0},{name:"description",target:{name:"string",properties:[{name:"label",type:"string",value:"Description"}]},required:!0},{name:"website",target:{name:"string",properties:[{name:"label",type:"string",value:"Website"}]},required:!1}],properties:[]}],Ei={concept:vi},Oi=[{concept:{prototype:"organization"},tags:["project"],container:{content:[{type:"container",content:[{kind:"static",type:"text",content:"Projects",style:{css:["pp-title"]}},{kind:"static",type:"button",name:"add-project",action:{type:"CREATE",target:{type:"attribute",name:"projects"}},help:"Add a project",content:[{kind:"static",type:"text",content:"+",style:{css:["pp__btn-add-icon"]}},{kind:"static",type:"text",content:"New",style:{css:["pp__btn-add-text"]}}],style:{css:["btn","pp__btn-add"],ref:["box-left"]}}],layout:{type:"flex",orientation:"row"},style:{css:["pp-wrap"],ref:["box-top"]}},{type:"attribute",name:"projects",tag:"view-box",style:{ref:["box-top"]}}],layout:{type:"flex",orientation:"column",wrappable:!1},style:{css:["pp-organization"]},focusable:!0}},{concept:{name:"project"},tags:["card-view"],container:{content:[{type:"attribute",name:"name",tag:"textbox-label"},{type:"attribute",name:"description",tag:"textarea-label",style:{ref:["box-top"]}},{type:"container",content:[{type:"attribute",name:"start-date",tag:"textbox-label",style:{css:["pp-fieldgroup-element"]}},{type:"attribute",name:"end-date",tag:"textbox-label",style:{css:["pp-fieldgroup-element"],ref:["box-left"]}},{type:"attribute",name:"funding",tag:"textbox-label",style:{css:["pp-fieldgroup-element","pp-fieldgroup-element--3"],ref:["box-left"]}}],layout:{type:"flex",orientation:"row",wrappable:!1},style:{css:["pp-fieldgroup"]}},{type:"container",content:[{kind:"static",type:"text",content:"Partners",style:{css:["pp-subtitle"]}},{kind:"static",type:"button",name:"add-area",action:{type:"CREATE",target:{type:"attribute",name:"partners"}},help:"Add a partner",content:[{kind:"static",type:"text",content:"+",style:{css:["pp__btn-add-icon"]}},{kind:"static",type:"text",content:"New",style:{css:["pp__btn-add-text"]}}],style:{css:["btn","pp__btn-add"],ref:["box-left"]}}],layout:{type:"flex",orientation:"row"},style:{css:["pp-wrap"],ref:["box-top"]}},{type:"attribute",name:"partners",tag:"partners",style:{css:["areas"],ref:["box-top"]}}],layout:{type:"flex",orientation:"column"},style:{css:["pp-project","pp-project--edit"]},focusable:!0}},{concept:{name:"partner"},tags:["edit-view"],container:{content:[{kind:"static",type:"text",content:"Partner",style:{css:["pp-area-title"]}},{type:"attribute",name:"name",tag:"textbox",options:{placeholder:"name"}},{type:"attribute",name:"description",tag:"textarea",required:!0,style:{ref:["box-top"]}},{type:"attribute",name:"website",tag:"textbox",required:!0,options:{placeholder:"URL"},style:{ref:["box-top"]}}],layout:{type:"flex",orientation:"column"},style:{css:["pp-area","pp-area--edit"]},focusable:!0}},{concept:{name:"set"},tags:["view-box"],type:"container",container:{content:[{kind:"field",type:"list",list:{item:{template:{tag:"card-view"},style:{css:["pp-person-set__list-item"]}},style:{css:["pp-person-set__list"]}},action:{add:!1,remove:{content:[{kind:"static",type:"text",content:"✖"}],style:{css:["pp-person-set__btn-remove"]}}}}],layout:{type:"flex",orientation:"column"}}},{concept:{name:"set"},type:"field",tags:["partners"],content:{type:"list",list:{item:{template:{tag:"edit-view"},style:{css:["pp-set__list-item"]}},style:{css:["pp-set__list"]}},action:{add:!1,remove:!1}}}],Ai=[],Ni=[],Ti={projection:Oi,template:Ai,style:Ni},Ii=[{concept:{prototype:"organization"},tags:["tool"],container:{content:[{type:"container",content:[{kind:"static",type:"text",content:"Tools",style:{css:["pp-title"]}},{kind:"static",type:"button",name:"add-project",action:{type:"CREATE",target:{type:"attribute",name:"tools"}},help:"Add a project",content:[{kind:"static",type:"text",content:"+",style:{css:["pp__btn-add-icon"]}},{kind:"static",type:"text",content:"New",style:{css:["pp__btn-add-text"]}}],style:{css:["btn","pp__btn-add"],ref:["box-left"]}}],layout:{type:"flex",orientation:"row"},style:{css:["pp-wrap"],ref:["box-top"]}},{type:"attribute",name:"tools",tag:"view-box",style:{ref:["box-top"]}}],layout:{type:"flex",orientation:"column",wrappable:!1},style:{css:["pp-organization"]},focusable:!0}},{concept:{name:"tool"},tags:["card-view"],container:{content:[{type:"container",content:[{type:"attribute",name:"name",tag:"textbox-label",style:{css:["pp-fieldgroup-element","pp-fieldgroup-element--3"]}}],layout:{type:"flex",orientation:"row",wrappable:!1},style:{css:["pp-fieldgroup"]}},{type:"attribute",name:"description",tag:"textarea-label",style:{ref:["box-top"]}},{type:"container",content:[{type:"attribute",name:"start-date",tag:"textbox-label",style:{css:["pp-fieldgroup-element"]}},{type:"attribute",name:"url",tag:"textbox-label",style:{css:["pp-fieldgroup-element","pp-fieldgroup-element--3"],ref:["box-left"]}}],layout:{type:"flex",orientation:"row",wrappable:!1},style:{css:["pp-fieldgroup"]}}],layout:{type:"flex",orientation:"column"},style:{css:["pp-project","pp-project--edit"]},focusable:!0}}],_i=[],Ci=[],Li={projection:Ii,template:_i,style:Ci},xi=[{concept:{name:"boolean"},tags:["switch-field"],type:"field",content:{type:"binary",checkbox:{label:{content:[{type:"property",name:"refname"}],style:{css:["switch-field__label"]}},style:{css:["switch-field__checkbox"]}},style:{css:["switch-field"]}}},{concept:{name:"string"},type:"field",tags:["tag"],content:{type:"text",resizable:!0,input:{type:"text",placeholder:"tag",style:{css:["pp-tagbox__input"]}},style:{css:["pp-tagbox"]}}},{concept:{name:"string"},type:"field",tags:["textbox"],content:{type:"text",input:{type:"text",placeholder:{type:"property",name:"label"},style:{css:["pp-textbox__input"]}},style:{css:["pp-textbox"]}}},{concept:{name:"string"},type:"field",tags:["textbox-label"],content:{type:"text",container:{type:"flex",orientation:"row",content:[{type:"static",static:{type:"text",content:{type:"property",name:"label"},style:{css:["pp-textbox2__label"]}}},{type:"input",input:{type:"text",placeholder:{type:"property",name:"placeholder"},style:{css:["pp-textbox2__input"]}}}],style:{css:["pp-textbox2"]}}}},{concept:{name:"string"},type:"field",tags:["textarea"],content:{type:"text",multiline:!0,input:{type:"text",placeholder:"Enter a description",style:{css:["pp-textarea__input"]}},style:{css:["pp-textarea"]}}},{concept:{name:"string"},type:"field",tags:["textarea-label"],field:{type:"text",multiline:!0,container:{content:[{type:"static",static:{type:"text",content:{type:"property",name:"label"},style:{css:["pp-textarea2__label"]}}},{type:"input",multiline:!0,input:{type:"text",placeholder:"Enter a description",style:{css:["pp-textarea2__input"]}}}],layout:{type:"flex",orientation:"row",wrappable:!0}},style:{css:["pp-textarea2"]}}},{concept:{name:"number"},type:"field",tags:["textbox-label"],content:{type:"text",container:{type:"flex",orientation:"row",content:[{type:"static",static:{type:"text",content:{type:"property",name:"label"},style:{css:["pp-textbox2__label"]}}},{type:"input",input:{type:"number",placeholder:{type:"property",name:"placeholder"},style:{css:["pp-textbox2__input"]}}}],style:{css:["pp-textbox2"]}}}},{concept:{name:"string"},type:"static",tags:["text"],content:{type:"text",content:{type:"property",name:"value"},style:{css:["pp-text"]}}},{concept:{name:"string"},type:"static",tags:["email"],content:{type:"link",urlType:"email",url:{type:"property",name:"value"},content:[{type:"property",name:"value"}],style:{css:["pp-email"]}}},{concept:{name:"string"},type:"static",tags:["url"],content:{type:"link",urlType:"link",url:{type:"property",name:"value"},content:[{type:"property",name:"value"}],style:{css:["pp-email"]}}},{concept:{name:"string"},type:"static",tags:["image"],content:{type:"image",url:{type:"property",name:"value"},style:{css:["pp-image"]}}},{concept:{name:"set"},type:"field",tags:["tags"],content:{type:"list",list:{item:{template:{tag:"tag"},style:{css:["pp-tag-set__list-item"]}},style:{css:["pp-tag-set__list"]}},action:{add:!1,remove:{content:[{kind:"static",type:"text",content:"✖"}],style:{css:["pp-tag-set__btn-remove"]}}}}},{concept:{name:"set"},type:"field",tags:["areas"],content:{type:"list",list:{item:{template:{tag:"edit-view"},style:{css:["pp-set__list-item"]}},style:{css:["pp-set__list"]}},action:{add:!1,remove:!1}}}],$i={projection:xi},Mi="GEODES",Pi="GEODES was founded as part of DIRO in 1992. It was then called GÉLO and changed to GEODES in 2005. Since then, more than 30 students have obtained a PhD degree from the group, and more then a 100 students have graduated with a Master's degree. Many of these students are professors in Quebec, Canada, and around the world (ÉTS, Laval, Polytechnique, UQAM, Ottawa, DePaul, Houston, Indiana, Michigan, United Arab Emirates, etc.), and others hold key positions at large tech companies. GEODES is very scientifically very active group with over 20 publications per year in journals, conference proceedings and book chapters.",ji="https://geodes.iro.umontreal.ca/",Bi="UMontrealGEODES",qi="geodes@iro.umontreal.ca",Di="",Ri={twitter:"UMontrealGEODES"},ne={name:Mi,description:Pi,website:ji,twitter:Bi,email:qi,phone:Di,socials:Ri},Pt=Symbol.for("yaml.alias"),At=Symbol.for("yaml.document"),X=Symbol.for("yaml.map"),Pn=Symbol.for("yaml.pair"),Q=Symbol.for("yaml.scalar"),ke=Symbol.for("yaml.seq"),U=Symbol.for("yaml.node.type"),le=n=>!!n&&typeof n=="object"&&n[U]===Pt,Se=n=>!!n&&typeof n=="object"&&n[U]===At,ve=n=>!!n&&typeof n=="object"&&n[U]===X,T=n=>!!n&&typeof n=="object"&&n[U]===Pn,N=n=>!!n&&typeof n=="object"&&n[U]===Q,Ee=n=>!!n&&typeof n=="object"&&n[U]===ke;function _(n){if(n&&typeof n=="object")switch(n[U]){case X:case ke:return!0}return!1}function L(n){if(n&&typeof n=="object")switch(n[U]){case Pt:case X:case Q:case ke:return!0}return!1}const Ki=n=>(N(n)||_(n))&&!!n.anchor,q=Symbol("break visit"),jn=Symbol("skip children"),J=Symbol("remove node");function Z(n,e){const t=Bn(e);Se(n)?pe(null,n.contents,t,Object.freeze([n]))===J&&(n.contents=null):pe(null,n,t,Object.freeze([]))}Z.BREAK=q;Z.SKIP=jn;Z.REMOVE=J;function pe(n,e,t,s){const i=qn(n,e,t,s);if(L(i)||T(i))return Dn(n,s,i),pe(n,i,t,s);if(typeof i!="symbol"){if(_(e)){s=Object.freeze(s.concat(e));for(let r=0;r<e.items.length;++r){const a=pe(r,e.items[r],t,s);if(typeof a=="number")r=a-1;else{if(a===q)return q;a===J&&(e.items.splice(r,1),r-=1)}}}else if(T(e)){s=Object.freeze(s.concat(e));const r=pe("key",e.key,t,s);if(r===q)return q;r===J&&(e.key=null);const a=pe("value",e.value,t,s);if(a===q)return q;a===J&&(e.value=null)}}return i}async function Xe(n,e){const t=Bn(e);Se(n)?await de(null,n.contents,t,Object.freeze([n]))===J&&(n.contents=null):await de(null,n,t,Object.freeze([]))}Xe.BREAK=q;Xe.SKIP=jn;Xe.REMOVE=J;async function de(n,e,t,s){const i=await qn(n,e,t,s);if(L(i)||T(i))return Dn(n,s,i),de(n,i,t,s);if(typeof i!="symbol"){if(_(e)){s=Object.freeze(s.concat(e));for(let r=0;r<e.items.length;++r){const a=await de(r,e.items[r],t,s);if(typeof a=="number")r=a-1;else{if(a===q)return q;a===J&&(e.items.splice(r,1),r-=1)}}}else if(T(e)){s=Object.freeze(s.concat(e));const r=await de("key",e.key,t,s);if(r===q)return q;r===J&&(e.key=null);const a=await de("value",e.value,t,s);if(a===q)return q;a===J&&(e.value=null)}}return i}function Bn(n){return typeof n=="object"&&(n.Collection||n.Node||n.Value)?Object.assign({Alias:n.Node,Map:n.Node,Scalar:n.Node,Seq:n.Node},n.Value&&{Map:n.Value,Scalar:n.Value,Seq:n.Value},n.Collection&&{Map:n.Collection,Seq:n.Collection},n):n}function qn(n,e,t,s){var i,r,a,o,l;if(typeof t=="function")return t(n,e,s);if(ve(e))return(i=t.Map)==null?void 0:i.call(t,n,e,s);if(Ee(e))return(r=t.Seq)==null?void 0:r.call(t,n,e,s);if(T(e))return(a=t.Pair)==null?void 0:a.call(t,n,e,s);if(N(e))return(o=t.Scalar)==null?void 0:o.call(t,n,e,s);if(le(e))return(l=t.Alias)==null?void 0:l.call(t,n,e,s)}function Dn(n,e,t){const s=e[e.length-1];if(_(s))s.items[n]=t;else if(T(s))n==="key"?s.key=t:s.value=t;else if(Se(s))s.contents=t;else{const i=le(s)?"alias":"scalar";throw new Error(`Cannot replace node with ${i} parent`)}}const Fi={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},Ui=n=>n.replace(/[!,[\]{}]/g,e=>Fi[e]);class B{constructor(e,t){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},B.defaultYaml,e),this.tags=Object.assign({},B.defaultTags,t)}clone(){const e=new B(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new B(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:B.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},B.defaultTags);break}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:B.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},B.defaultTags),this.atNextDocument=!1);const s=e.trim().split(/[ \t]+/),i=s.shift();switch(i){case"%TAG":{if(s.length!==2&&(t(0,"%TAG directive should contain exactly two parts"),s.length<2))return!1;const[r,a]=s;return this.tags[r]=a,!0}case"%YAML":{if(this.yaml.explicit=!0,s.length!==1)return t(0,"%YAML directive should contain exactly one part"),!1;const[r]=s;if(r==="1.1"||r==="1.2")return this.yaml.version=r,!0;{const a=/^\d+\.\d+$/.test(r);return t(6,`Unsupported YAML version ${r}`,a),!1}}default:return t(0,`Unknown directive ${i}`,!0),!1}}tagName(e,t){if(e==="!")return"!";if(e[0]!=="!")return t(`Not a valid tag: ${e}`),null;if(e[1]==="<"){const a=e.slice(2,-1);return a==="!"||a==="!!"?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&t("Verbatim tags must end with a >"),a)}const[,s,i]=e.match(/^(.*!)([^!]*)$/);i||t(`The ${e} tag has no suffix`);const r=this.tags[s];return r?r+decodeURIComponent(i):s==="!"?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[t,s]of Object.entries(this.tags))if(e.startsWith(s))return t+Ui(e.substring(s.length));return e[0]==="!"?e:`!<${e}>`}toString(e){const t=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],s=Object.entries(this.tags);let i;if(e&&s.length>0&&L(e.contents)){const r={};Z(e.contents,(a,o)=>{L(o)&&o.tag&&(r[o.tag]=!0)}),i=Object.keys(r)}else i=[];for(const[r,a]of s)r==="!!"&&a==="tag:yaml.org,2002:"||(!e||i.some(o=>o.startsWith(a)))&&t.push(`%TAG ${r} ${a}`);return t.join(`
`)}}B.defaultYaml={explicit:!1,version:"1.2"};B.defaultTags={"!!":"tag:yaml.org,2002:"};function Rn(n){if(/[\x00-\x19\s,[\]{}]/.test(n)){const t=`Anchor must not contain whitespace or control characters: ${JSON.stringify(n)}`;throw new Error(t)}return!0}function Kn(n){const e=new Set;return Z(n,{Value(t,s){s.anchor&&e.add(s.anchor)}}),e}function Fn(n,e){for(let t=1;;++t){const s=`${n}${t}`;if(!e.has(s))return s}}function Vi(n,e){const t=[],s=new Map;let i=null;return{onAnchor:r=>{t.push(r),i||(i=Kn(n));const a=Fn(e,i);return i.add(a),a},setAnchors:()=>{for(const r of t){const a=s.get(r);if(typeof a=="object"&&a.anchor&&(N(a.node)||_(a.node)))a.node.anchor=a.anchor;else{const o=new Error("Failed to resolve repeated object (this should not happen)");throw o.source=r,o}}},sourceObjects:s}}function he(n,e,t,s){if(s&&typeof s=="object")if(Array.isArray(s))for(let i=0,r=s.length;i<r;++i){const a=s[i],o=he(n,s,String(i),a);o===void 0?delete s[i]:o!==a&&(s[i]=o)}else if(s instanceof Map)for(const i of Array.from(s.keys())){const r=s.get(i),a=he(n,s,i,r);a===void 0?s.delete(i):a!==r&&s.set(i,a)}else if(s instanceof Set)for(const i of Array.from(s)){const r=he(n,s,i,i);r===void 0?s.delete(i):r!==i&&(s.delete(i),s.add(r))}else for(const[i,r]of Object.entries(s)){const a=he(n,s,i,r);a===void 0?delete s[i]:a!==r&&(s[i]=a)}return n.call(e,t,s)}function F(n,e,t){if(Array.isArray(n))return n.map((s,i)=>F(s,String(i),t));if(n&&typeof n.toJSON=="function"){if(!t||!Ki(n))return n.toJSON(e,t);const s={aliasCount:0,count:1,res:void 0};t.anchors.set(n,s),t.onCreate=r=>{s.res=r,delete t.onCreate};const i=n.toJSON(e,t);return t.onCreate&&t.onCreate(i),i}return typeof n=="bigint"&&!(t!=null&&t.keep)?Number(n):n}class jt{constructor(e){Object.defineProperty(this,U,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:t,maxAliasCount:s,onAnchor:i,reviver:r}={}){if(!Se(e))throw new TypeError("A document argument is required");const a={anchors:new Map,doc:e,keep:!0,mapAsMap:t===!0,mapKeyWarned:!1,maxAliasCount:typeof s=="number"?s:100},o=F(this,"",a);if(typeof i=="function")for(const{count:l,res:c}of a.anchors.values())i(c,l);return typeof r=="function"?he(r,{"":o},"",o):o}}class Ze extends jt{constructor(e){super(Pt),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let t;return Z(e,{Node:(s,i)=>{if(i===this)return Z.BREAK;i.anchor===this.source&&(t=i)}}),t}toJSON(e,t){if(!t)return{source:this.source};const{anchors:s,doc:i,maxAliasCount:r}=t,a=this.resolve(i);if(!a){const l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let o=s.get(a);if(o||(F(a,null,t),o=s.get(a)),!o||o.res===void 0){const l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(r>=0&&(o.count+=1,o.aliasCount===0&&(o.aliasCount=Fe(i,a,s)),o.count*o.aliasCount>r)){const l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return o.res}toString(e,t,s){const i=`*${this.source}`;if(e){if(Rn(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const r=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(r)}if(e.implicitKey)return`${i} `}return i}}function Fe(n,e,t){if(le(e)){const s=e.resolve(n),i=t&&s&&t.get(s);return i?i.count*i.aliasCount:0}else if(_(e)){let s=0;for(const i of e.items){const r=Fe(n,i,t);r>s&&(s=r)}return s}else if(T(e)){const s=Fe(n,e.key,t),i=Fe(n,e.value,t);return Math.max(s,i)}return 1}const Un=n=>!n||typeof n!="function"&&typeof n!="object";class A extends jt{constructor(e){super(Q),this.value=e}toJSON(e,t){return t!=null&&t.keep?this.value:F(this.value,e,t)}toString(){return String(this.value)}}A.BLOCK_FOLDED="BLOCK_FOLDED";A.BLOCK_LITERAL="BLOCK_LITERAL";A.PLAIN="PLAIN";A.QUOTE_DOUBLE="QUOTE_DOUBLE";A.QUOTE_SINGLE="QUOTE_SINGLE";const Hi="tag:yaml.org,2002:";function Gi(n,e,t){if(e){const s=t.filter(r=>r.tag===e),i=s.find(r=>!r.format)??s[0];if(!i)throw new Error(`Tag ${e} not found`);return i}return t.find(s=>{var i;return((i=s.identify)==null?void 0:i.call(s,n))&&!s.format})}function Le(n,e,t){var u,f,p;if(Se(n)&&(n=n.contents),L(n))return n;if(T(n)){const b=(f=(u=t.schema[X]).createNode)==null?void 0:f.call(u,t.schema,null,t);return b.items.push(n),b}(n instanceof String||n instanceof Number||n instanceof Boolean||typeof BigInt<"u"&&n instanceof BigInt)&&(n=n.valueOf());const{aliasDuplicateObjects:s,onAnchor:i,onTagObj:r,schema:a,sourceObjects:o}=t;let l;if(s&&n&&typeof n=="object"){if(l=o.get(n),l)return l.anchor||(l.anchor=i(n)),new Ze(l.anchor);l={anchor:null,node:null},o.set(n,l)}e!=null&&e.startsWith("!!")&&(e=Hi+e.slice(2));let c=Gi(n,e,a.tags);if(!c){if(n&&typeof n.toJSON=="function"&&(n=n.toJSON()),!n||typeof n!="object"){const b=new A(n);return l&&(l.node=b),b}c=n instanceof Map?a[X]:Symbol.iterator in Object(n)?a[ke]:a[X]}r&&(r(c),delete t.onTagObj);const h=c!=null&&c.createNode?c.createNode(t.schema,n,t):typeof((p=c==null?void 0:c.nodeClass)==null?void 0:p.from)=="function"?c.nodeClass.from(t.schema,n,t):new A(n);return e?h.tag=e:c.default||(h.tag=c.tag),l&&(l.node=h),h}function Ge(n,e,t){let s=t;for(let i=e.length-1;i>=0;--i){const r=e[i];if(typeof r=="number"&&Number.isInteger(r)&&r>=0){const a=[];a[r]=s,s=a}else s=new Map([[r,s]])}return Le(s,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:n,sourceObjects:new Map})}const Ie=n=>n==null||typeof n=="object"&&!!n[Symbol.iterator]().next().done;class et extends jt{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map(s=>L(s)||T(s)?s.clone(e):s),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(Ie(e))this.add(t);else{const[s,...i]=e,r=this.get(s,!0);if(_(r))r.addIn(i,t);else if(r===void 0&&this.schema)this.set(s,Ge(this.schema,i,t));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${i}`)}}deleteIn(e){const[t,...s]=e;if(s.length===0)return this.delete(t);const i=this.get(t,!0);if(_(i))return i.deleteIn(s);throw new Error(`Expected YAML collection at ${t}. Remaining path: ${s}`)}getIn(e,t){const[s,...i]=e,r=this.get(s,!0);return i.length===0?!t&&N(r)?r.value:r:_(r)?r.getIn(i,t):void 0}hasAllNullValues(e){return this.items.every(t=>{if(!T(t))return!1;const s=t.value;return s==null||e&&N(s)&&s.value==null&&!s.commentBefore&&!s.comment&&!s.tag})}hasIn(e){const[t,...s]=e;if(s.length===0)return this.has(t);const i=this.get(t,!0);return _(i)?i.hasIn(s):!1}setIn(e,t){const[s,...i]=e;if(i.length===0)this.set(s,t);else{const r=this.get(s,!0);if(_(r))r.setIn(i,t);else if(r===void 0&&this.schema)this.set(s,Ge(this.schema,i,t));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${i}`)}}}et.maxFlowStringSingleLineLength=60;const Ji=n=>n.replace(/^(?!$)(?: $)?/gm,"#");function Y(n,e){return/^\n+$/.test(n)?n.substring(1):e?n.replace(/^(?! *$)/gm,e):n}const W=(n,e,t)=>n.endsWith(`
`)?Y(t,e):t.includes(`
`)?`
`+Y(t,e):(n.endsWith(" ")?"":" ")+t,Vn="flow",Nt="block",Ue="quoted";function tt(n,e,t="flow",{indentAtStart:s,lineWidth:i=80,minContentWidth:r=20,onFold:a,onOverflow:o}={}){if(!i||i<0)return n;const l=Math.max(1+r,1+i-e.length);if(n.length<=l)return n;const c=[],h={};let u=i-e.length;typeof s=="number"&&(s>i-Math.max(2,r)?c.push(0):u=i-s);let f,p,b=!1,d=-1,m=-1,k=-1;t===Nt&&(d=tn(n,d),d!==-1&&(u=d+l));for(let E;E=n[d+=1];){if(t===Ue&&E==="\\"){switch(m=d,n[d+1]){case"x":d+=3;break;case"u":d+=5;break;case"U":d+=9;break;default:d+=1}k=d}if(E===`
`)t===Nt&&(d=tn(n,d)),u=d+l,f=void 0;else{if(E===" "&&p&&p!==" "&&p!==`
`&&p!=="	"){const v=n[d+1];v&&v!==" "&&v!==`
`&&v!=="	"&&(f=d)}if(d>=u)if(f)c.push(f),u=f+l,f=void 0;else if(t===Ue){for(;p===" "||p==="	";)p=E,E=n[d+=1],b=!0;const v=d>k+1?d-2:m-1;if(h[v])return n;c.push(v),h[v]=!0,u=v+l,f=void 0}else b=!0}p=E}if(b&&o&&o(),c.length===0)return n;a&&a();let S=n.slice(0,c[0]);for(let E=0;E<c.length;++E){const v=c[E],O=c[E+1]||n.length;v===0?S=`
${e}${n.slice(0,O)}`:(t===Ue&&h[v]&&(S+=`${n[v]}\\`),S+=`
${e}${n.slice(v+1,O)}`)}return S}function tn(n,e){let t=n[e+1];for(;t===" "||t==="	";){do t=n[e+=1];while(t&&t!==`
`);t=n[e+1]}return e}const nt=(n,e)=>({indentAtStart:e?n.indent.length:n.indentAtStart,lineWidth:n.options.lineWidth,minContentWidth:n.options.minContentWidth}),st=n=>/^(%|---|\.\.\.)/m.test(n);function zi(n,e,t){if(!e||e<0)return!1;const s=e-t,i=n.length;if(i<=s)return!1;for(let r=0,a=0;r<i;++r)if(n[r]===`
`){if(r-a>s)return!0;if(a=r+1,i-a<=s)return!1}return!0}function _e(n,e){const t=JSON.stringify(n);if(e.options.doubleQuotedAsJSON)return t;const{implicitKey:s}=e,i=e.options.doubleQuotedMinMultiLineLength,r=e.indent||(st(n)?"  ":"");let a="",o=0;for(let l=0,c=t[l];c;c=t[++l])if(c===" "&&t[l+1]==="\\"&&t[l+2]==="n"&&(a+=t.slice(o,l)+"\\ ",l+=1,o=l,c="\\"),c==="\\")switch(t[l+1]){case"u":{a+=t.slice(o,l);const h=t.substr(l+2,4);switch(h){case"0000":a+="\\0";break;case"0007":a+="\\a";break;case"000b":a+="\\v";break;case"001b":a+="\\e";break;case"0085":a+="\\N";break;case"00a0":a+="\\_";break;case"2028":a+="\\L";break;case"2029":a+="\\P";break;default:h.substr(0,2)==="00"?a+="\\x"+h.substr(2):a+=t.substr(l,6)}l+=5,o=l+1}break;case"n":if(s||t[l+2]==='"'||t.length<i)l+=1;else{for(a+=t.slice(o,l)+`

`;t[l+2]==="\\"&&t[l+3]==="n"&&t[l+4]!=='"';)a+=`
`,l+=2;a+=r,t[l+2]===" "&&(a+="\\"),l+=1,o=l+1}break;default:l+=1}return a=o?a+t.slice(o):t,s?a:tt(a,r,Ue,nt(e,!1))}function Tt(n,e){if(e.options.singleQuote===!1||e.implicitKey&&n.includes(`
`)||/[ \t]\n|\n[ \t]/.test(n))return _e(n,e);const t=e.indent||(st(n)?"  ":""),s="'"+n.replace(/'/g,"''").replace(/\n+/g,`$&
${t}`)+"'";return e.implicitKey?s:tt(s,t,Vn,nt(e,!1))}function me(n,e){const{singleQuote:t}=e.options;let s;if(t===!1)s=_e;else{const i=n.includes('"'),r=n.includes("'");i&&!r?s=Tt:r&&!i?s=_e:s=t?Tt:_e}return s(n,e)}let It;try{It=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{It=/\n+(?!\n|$)/g}function Ve({comment:n,type:e,value:t},s,i,r){const{blockQuote:a,commentString:o,lineWidth:l}=s.options;if(!a||/\n[\t ]+$/.test(t)||/^\s*$/.test(t))return me(t,s);const c=s.indent||(s.forceBlockIndent||st(t)?"  ":""),h=a==="literal"?!0:a==="folded"||e===A.BLOCK_FOLDED?!1:e===A.BLOCK_LITERAL?!0:!zi(t,l,c.length);if(!t)return h?`|
`:`>
`;let u,f;for(f=t.length;f>0;--f){const g=t[f-1];if(g!==`
`&&g!=="	"&&g!==" ")break}let p=t.substring(f);const b=p.indexOf(`
`);b===-1?u="-":t===p||b!==p.length-1?(u="+",r&&r()):u="",p&&(t=t.slice(0,-p.length),p[p.length-1]===`
`&&(p=p.slice(0,-1)),p=p.replace(It,`$&${c}`));let d=!1,m,k=-1;for(m=0;m<t.length;++m){const g=t[m];if(g===" ")d=!0;else if(g===`
`)k=m;else break}let S=t.substring(0,k<m?k+1:m);S&&(t=t.substring(S.length),S=S.replace(/\n+/g,`$&${c}`));let v=(h?"|":">")+(d?c?"2":"1":"")+u;if(n&&(v+=" "+o(n.replace(/ ?[\r\n]+/g," ")),i&&i()),h)return t=t.replace(/\n+/g,`$&${c}`),`${v}
${c}${S}${t}${p}`;t=t.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${c}`);const O=tt(`${S}${t}${p}`,c,Nt,nt(s,!0));return`${v}
${c}${O}`}function Yi(n,e,t,s){const{type:i,value:r}=n,{actualString:a,implicitKey:o,indent:l,indentStep:c,inFlow:h}=e;if(o&&/[\n[\]{},]/.test(r)||h&&/[[\]{},]/.test(r))return me(r,e);if(!r||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(r))return o||h||!r.includes(`
`)?me(r,e):Ve(n,e,t,s);if(!o&&!h&&i!==A.PLAIN&&r.includes(`
`))return Ve(n,e,t,s);if(st(r)){if(l==="")return e.forceBlockIndent=!0,Ve(n,e,t,s);if(o&&l===c)return me(r,e)}const u=r.replace(/\n+/g,`$&
${l}`);if(a){const f=d=>{var m;return d.default&&d.tag!=="tag:yaml.org,2002:str"&&((m=d.test)==null?void 0:m.test(u))},{compat:p,tags:b}=e.doc.schema;if(b.some(f)||p!=null&&p.some(f))return me(r,e)}return o?u:tt(u,l,Vn,nt(e,!1))}function Me(n,e,t,s){const{implicitKey:i,inFlow:r}=e,a=typeof n.value=="string"?n:Object.assign({},n,{value:String(n.value)});let{type:o}=n;o!==A.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(a.value)&&(o=A.QUOTE_DOUBLE);const l=h=>{switch(h){case A.BLOCK_FOLDED:case A.BLOCK_LITERAL:return i||r?me(a.value,e):Ve(a,e,t,s);case A.QUOTE_DOUBLE:return _e(a.value,e);case A.QUOTE_SINGLE:return Tt(a.value,e);case A.PLAIN:return Yi(a,e,t,s);default:return null}};let c=l(o);if(c===null){const{defaultKeyType:h,defaultStringType:u}=e.options,f=i&&h||u;if(c=l(f),c===null)throw new Error(`Unsupported default string type ${f}`)}return c}function Hn(n,e){const t=Object.assign({blockQuote:!0,commentString:Ji,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},n.schema.toStringOptions,e);let s;switch(t.collectionStyle){case"block":s=!1;break;case"flow":s=!0;break;default:s=null}return{anchors:new Set,doc:n,flowCollectionPadding:t.flowCollectionPadding?" ":"",indent:"",indentStep:typeof t.indent=="number"?" ".repeat(t.indent):"  ",inFlow:s,options:t}}function Qi(n,e){var i;if(e.tag){const r=n.filter(a=>a.tag===e.tag);if(r.length>0)return r.find(a=>a.format===e.format)??r[0]}let t,s;if(N(e)){s=e.value;const r=n.filter(a=>{var o;return(o=a.identify)==null?void 0:o.call(a,s)});t=r.find(a=>a.format===e.format)??r.find(a=>!a.format)}else s=e,t=n.find(r=>r.nodeClass&&s instanceof r.nodeClass);if(!t){const r=((i=s==null?void 0:s.constructor)==null?void 0:i.name)??typeof s;throw new Error(`Tag not resolved for ${r} value`)}return t}function Wi(n,e,{anchors:t,doc:s}){if(!s.directives)return"";const i=[],r=(N(n)||_(n))&&n.anchor;r&&Rn(r)&&(t.add(r),i.push(`&${r}`));const a=n.tag?n.tag:e.default?null:e.tag;return a&&i.push(s.directives.tagString(a)),i.join(" ")}function be(n,e,t,s){var l;if(T(n))return n.toString(e,t,s);if(le(n)){if(e.doc.directives)return n.toString(e);if((l=e.resolvedAliases)!=null&&l.has(n))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(n):e.resolvedAliases=new Set([n]),n=n.resolve(e.doc)}let i;const r=L(n)?n:e.doc.createNode(n,{onTagObj:c=>i=c});i||(i=Qi(e.doc.schema.tags,r));const a=Wi(r,i,e);a.length>0&&(e.indentAtStart=(e.indentAtStart??0)+a.length+1);const o=typeof i.stringify=="function"?i.stringify(r,e,t,s):N(r)?Me(r,e,t,s):r.toString(e,t,s);return a?N(r)||o[0]==="{"||o[0]==="["?`${a} ${o}`:`${a}
${e.indent}${o}`:o}function Xi({key:n,value:e},t,s,i){const{allNullValues:r,doc:a,indent:o,indentStep:l,options:{commentString:c,indentSeq:h,simpleKeys:u}}=t;let f=L(n)&&n.comment||null;if(u){if(f)throw new Error("With simple keys, key nodes cannot have comments");if(_(n)){const I="With simple keys, collection cannot be used as a key value";throw new Error(I)}}let p=!u&&(!n||f&&e==null&&!t.inFlow||_(n)||(N(n)?n.type===A.BLOCK_FOLDED||n.type===A.BLOCK_LITERAL:typeof n=="object"));t=Object.assign({},t,{allNullValues:!1,implicitKey:!p&&(u||!r),indent:o+l});let b=!1,d=!1,m=be(n,t,()=>b=!0,()=>d=!0);if(!p&&!t.inFlow&&m.length>1024){if(u)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");p=!0}if(t.inFlow){if(r||e==null)return b&&s&&s(),m===""?"?":p?`? ${m}`:m}else if(r&&!u||e==null&&p)return m=`? ${m}`,f&&!b?m+=W(m,t.indent,c(f)):d&&i&&i(),m;b&&(f=null),p?(f&&(m+=W(m,t.indent,c(f))),m=`? ${m}
${o}:`):(m=`${m}:`,f&&(m+=W(m,t.indent,c(f))));let k,S,E;L(e)?(k=!!e.spaceBefore,S=e.commentBefore,E=e.comment):(k=!1,S=null,E=null,e&&typeof e=="object"&&(e=a.createNode(e))),t.implicitKey=!1,!p&&!f&&N(e)&&(t.indentAtStart=m.length+1),d=!1,!h&&l.length>=2&&!t.inFlow&&!p&&Ee(e)&&!e.flow&&!e.tag&&!e.anchor&&(t.indent=t.indent.substring(2));let v=!1;const O=be(e,t,()=>v=!0,()=>d=!0);let g=" ";if(f||k||S){if(g=k?`
`:"",S){const I=c(S);g+=`
${Y(I,t.indent)}`}O===""&&!t.inFlow?g===`
`&&(g=`

`):g+=`
${t.indent}`}else if(!p&&_(e)){const I=O[0],C=O.indexOf(`
`),$=C!==-1,te=t.inFlow??e.flow??e.items.length===0;if($||!te){let ce=!1;if($&&(I==="&"||I==="!")){let x=O.indexOf(" ");I==="&"&&x!==-1&&x<C&&O[x+1]==="!"&&(x=O.indexOf(" ",x+1)),(x===-1||C<x)&&(ce=!0)}ce||(g=`
${t.indent}`)}}else(O===""||O[0]===`
`)&&(g="");return m+=g+O,t.inFlow?v&&s&&s():E&&!v?m+=W(m,t.indent,c(E)):d&&i&&i(),m}function Gn(n,e){(n==="debug"||n==="warn")&&(typeof process<"u"&&process.emitWarning?process.emitWarning(e):console.warn(e))}const nn="<<";function Jn(n,e,{key:t,value:s}){if(n!=null&&n.doc.schema.merge&&Zi(t))if(s=le(s)?s.resolve(n.doc):s,Ee(s))for(const i of s.items)ht(n,e,i);else if(Array.isArray(s))for(const i of s)ht(n,e,i);else ht(n,e,s);else{const i=F(t,"",n);if(e instanceof Map)e.set(i,F(s,i,n));else if(e instanceof Set)e.add(i);else{const r=er(t,i,n),a=F(s,r,n);r in e?Object.defineProperty(e,r,{value:a,writable:!0,enumerable:!0,configurable:!0}):e[r]=a}}return e}const Zi=n=>n===nn||N(n)&&n.value===nn&&(!n.type||n.type===A.PLAIN);function ht(n,e,t){const s=n&&le(t)?t.resolve(n.doc):t;if(!ve(s))throw new Error("Merge sources must be maps or map aliases");const i=s.toJSON(null,n,Map);for(const[r,a]of i)e instanceof Map?e.has(r)||e.set(r,a):e instanceof Set?e.add(r):Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(e,r,{value:a,writable:!0,enumerable:!0,configurable:!0});return e}function er(n,e,t){if(e===null)return"";if(typeof e!="object")return String(e);if(L(n)&&t&&t.doc){const s=Hn(t.doc,{});s.anchors=new Set;for(const r of t.anchors.keys())s.anchors.add(r.anchor);s.inFlow=!0,s.inStringifyKey=!0;const i=n.toString(s);if(!t.mapKeyWarned){let r=JSON.stringify(i);r.length>40&&(r=r.substring(0,36)+'..."'),Gn(t.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${r}. Set mapAsMap: true to use object keys.`),t.mapKeyWarned=!0}return i}return JSON.stringify(e)}function Bt(n,e,t){const s=Le(n,void 0,t),i=Le(e,void 0,t);return new P(s,i)}class P{constructor(e,t=null){Object.defineProperty(this,U,{value:Pn}),this.key=e,this.value=t}clone(e){let{key:t,value:s}=this;return L(t)&&(t=t.clone(e)),L(s)&&(s=s.clone(e)),new P(t,s)}toJSON(e,t){const s=t!=null&&t.mapAsMap?new Map:{};return Jn(t,s,this)}toString(e,t,s){return e!=null&&e.doc?Xi(this,e,t,s):JSON.stringify(this)}}function zn(n,e,t){return(e.inFlow??n.flow?nr:tr)(n,e,t)}function tr({comment:n,items:e},t,{blockItemPrefix:s,flowChars:i,itemIndent:r,onChompKeep:a,onComment:o}){const{indent:l,options:{commentString:c}}=t,h=Object.assign({},t,{indent:r,type:null});let u=!1;const f=[];for(let b=0;b<e.length;++b){const d=e[b];let m=null;if(L(d))!u&&d.spaceBefore&&f.push(""),Je(t,f,d.commentBefore,u),d.comment&&(m=d.comment);else if(T(d)){const S=L(d.key)?d.key:null;S&&(!u&&S.spaceBefore&&f.push(""),Je(t,f,S.commentBefore,u))}u=!1;let k=be(d,h,()=>m=null,()=>u=!0);m&&(k+=W(k,r,c(m))),u&&m&&(u=!1),f.push(s+k)}let p;if(f.length===0)p=i.start+i.end;else{p=f[0];for(let b=1;b<f.length;++b){const d=f[b];p+=d?`
${l}${d}`:`
`}}return n?(p+=`
`+Y(c(n),l),o&&o()):u&&a&&a(),p}function nr({comment:n,items:e},t,{flowChars:s,itemIndent:i,onComment:r}){const{indent:a,indentStep:o,flowCollectionPadding:l,options:{commentString:c}}=t;i+=o;const h=Object.assign({},t,{indent:i,inFlow:!0,type:null});let u=!1,f=0;const p=[];for(let k=0;k<e.length;++k){const S=e[k];let E=null;if(L(S))S.spaceBefore&&p.push(""),Je(t,p,S.commentBefore,!1),S.comment&&(E=S.comment);else if(T(S)){const O=L(S.key)?S.key:null;O&&(O.spaceBefore&&p.push(""),Je(t,p,O.commentBefore,!1),O.comment&&(u=!0));const g=L(S.value)?S.value:null;g?(g.comment&&(E=g.comment),g.commentBefore&&(u=!0)):S.value==null&&O&&O.comment&&(E=O.comment)}E&&(u=!0);let v=be(S,h,()=>E=null);k<e.length-1&&(v+=","),E&&(v+=W(v,i,c(E))),!u&&(p.length>f||v.includes(`
`))&&(u=!0),p.push(v),f=p.length}let b;const{start:d,end:m}=s;if(p.length===0)b=d+m;else if(u||(u=p.reduce((S,E)=>S+E.length+2,2)>et.maxFlowStringSingleLineLength),u){b=d;for(const k of p)b+=k?`
${o}${a}${k}`:`
`;b+=`
${a}${m}`}else b=`${d}${l}${p.join(" ")}${l}${m}`;return n&&(b+=W(b,a,c(n)),r&&r()),b}function Je({indent:n,options:{commentString:e}},t,s,i){if(s&&i&&(s=s.replace(/^\n+/,"")),s){const r=Y(e(s),n);t.push(r.trimStart())}}function ie(n,e){const t=N(e)?e.value:e;for(const s of n)if(T(s)&&(s.key===e||s.key===t||N(s.key)&&s.key.value===t))return s}class D extends et{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(X,e),this.items=[]}static from(e,t,s){const{keepUndefined:i,replacer:r}=s,a=new this(e),o=(l,c)=>{if(typeof r=="function")c=r.call(t,l,c);else if(Array.isArray(r)&&!r.includes(l))return;(c!==void 0||i)&&a.items.push(Bt(l,c,s))};if(t instanceof Map)for(const[l,c]of t)o(l,c);else if(t&&typeof t=="object")for(const l of Object.keys(t))o(l,t[l]);return typeof e.sortMapEntries=="function"&&a.items.sort(e.sortMapEntries),a}add(e,t){var a;let s;T(e)?s=e:!e||typeof e!="object"||!("key"in e)?s=new P(e,e==null?void 0:e.value):s=new P(e.key,e.value);const i=ie(this.items,s.key),r=(a=this.schema)==null?void 0:a.sortMapEntries;if(i){if(!t)throw new Error(`Key ${s.key} already set`);N(i.value)&&Un(s.value)?i.value.value=s.value:i.value=s.value}else if(r){const o=this.items.findIndex(l=>r(s,l)<0);o===-1?this.items.push(s):this.items.splice(o,0,s)}else this.items.push(s)}delete(e){const t=ie(this.items,e);return t?this.items.splice(this.items.indexOf(t),1).length>0:!1}get(e,t){const s=ie(this.items,e),i=s==null?void 0:s.value;return(!t&&N(i)?i.value:i)??void 0}has(e){return!!ie(this.items,e)}set(e,t){this.add(new P(e,t),!0)}toJSON(e,t,s){const i=s?new s:t!=null&&t.mapAsMap?new Map:{};t!=null&&t.onCreate&&t.onCreate(i);for(const r of this.items)Jn(t,i,r);return i}toString(e,t,s){if(!e)return JSON.stringify(this);for(const i of this.items)if(!T(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),zn(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:s,onComment:t})}}const Oe={collection:"map",default:!0,nodeClass:D,tag:"tag:yaml.org,2002:map",resolve(n,e){return ve(n)||e("Expected a mapping for this tag"),n},createNode:(n,e,t)=>D.from(n,e,t)};class ee extends et{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(ke,e),this.items=[]}add(e){this.items.push(e)}delete(e){const t=Be(e);return typeof t!="number"?!1:this.items.splice(t,1).length>0}get(e,t){const s=Be(e);if(typeof s!="number")return;const i=this.items[s];return!t&&N(i)?i.value:i}has(e){const t=Be(e);return typeof t=="number"&&t<this.items.length}set(e,t){const s=Be(e);if(typeof s!="number")throw new Error(`Expected a valid index, not ${e}.`);const i=this.items[s];N(i)&&Un(t)?i.value=t:this.items[s]=t}toJSON(e,t){const s=[];t!=null&&t.onCreate&&t.onCreate(s);let i=0;for(const r of this.items)s.push(F(r,String(i++),t));return s}toString(e,t,s){return e?zn(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:s,onComment:t}):JSON.stringify(this)}static from(e,t,s){const{replacer:i}=s,r=new this(e);if(t&&Symbol.iterator in Object(t)){let a=0;for(let o of t){if(typeof i=="function"){const l=t instanceof Set?o:String(a++);o=i.call(t,l,o)}r.items.push(Le(o,void 0,s))}}return r}}function Be(n){let e=N(n)?n.value:n;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}const Ae={collection:"seq",default:!0,nodeClass:ee,tag:"tag:yaml.org,2002:seq",resolve(n,e){return Ee(n)||e("Expected a sequence for this tag"),n},createNode:(n,e,t)=>ee.from(n,e,t)},it={identify:n=>typeof n=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:n=>n,stringify(n,e,t,s){return e=Object.assign({actualString:!0},e),Me(n,e,t,s)}},rt={identify:n=>n==null,createNode:()=>new A(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new A(null),stringify:({source:n},e)=>typeof n=="string"&&rt.test.test(n)?n:e.options.nullStr},qt={identify:n=>typeof n=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:n=>new A(n[0]==="t"||n[0]==="T"),stringify({source:n,value:e},t){if(n&&qt.test.test(n)){const s=n[0]==="t"||n[0]==="T";if(e===s)return n}return e?t.options.trueStr:t.options.falseStr}};function G({format:n,minFractionDigits:e,tag:t,value:s}){if(typeof s=="bigint")return String(s);const i=typeof s=="number"?s:Number(s);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let r=JSON.stringify(s);if(!n&&e&&(!t||t==="tag:yaml.org,2002:float")&&/^\d/.test(r)){let a=r.indexOf(".");a<0&&(a=r.length,r+=".");let o=e-(r.length-a-1);for(;o-- >0;)r+="0"}return r}const Yn={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:n=>n.slice(-3).toLowerCase()==="nan"?NaN:n[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:G},Qn={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:n=>parseFloat(n),stringify(n){const e=Number(n.value);return isFinite(e)?e.toExponential():G(n)}},Wn={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(n){const e=new A(parseFloat(n)),t=n.indexOf(".");return t!==-1&&n[n.length-1]==="0"&&(e.minFractionDigits=n.length-t-1),e},stringify:G},at=n=>typeof n=="bigint"||Number.isInteger(n),Dt=(n,e,t,{intAsBigInt:s})=>s?BigInt(n):parseInt(n.substring(e),t);function Xn(n,e,t){const{value:s}=n;return at(s)&&s>=0?t+s.toString(e):G(n)}const Zn={identify:n=>at(n)&&n>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(n,e,t)=>Dt(n,2,8,t),stringify:n=>Xn(n,8,"0o")},es={identify:at,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(n,e,t)=>Dt(n,0,10,t),stringify:G},ts={identify:n=>at(n)&&n>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(n,e,t)=>Dt(n,2,16,t),stringify:n=>Xn(n,16,"0x")},sr=[Oe,Ae,it,rt,qt,Zn,es,ts,Yn,Qn,Wn];function sn(n){return typeof n=="bigint"||Number.isInteger(n)}const qe=({value:n})=>JSON.stringify(n),ir=[{identify:n=>typeof n=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:n=>n,stringify:qe},{identify:n=>n==null,createNode:()=>new A(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:qe},{identify:n=>typeof n=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:n=>n==="true",stringify:qe},{identify:sn,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(n,e,{intAsBigInt:t})=>t?BigInt(n):parseInt(n,10),stringify:({value:n})=>sn(n)?n.toString():JSON.stringify(n)},{identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:n=>parseFloat(n),stringify:qe}],rr={default:!0,tag:"",test:/^/,resolve(n,e){return e(`Unresolved plain scalar ${JSON.stringify(n)}`),n}},ar=[Oe,Ae].concat(ir,rr),Rt={identify:n=>n instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(n,e){if(typeof Buffer=="function")return Buffer.from(n,"base64");if(typeof atob=="function"){const t=atob(n.replace(/[\n\r]/g,"")),s=new Uint8Array(t.length);for(let i=0;i<t.length;++i)s[i]=t.charCodeAt(i);return s}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),n},stringify({comment:n,type:e,value:t},s,i,r){const a=t;let o;if(typeof Buffer=="function")o=a instanceof Buffer?a.toString("base64"):Buffer.from(a.buffer).toString("base64");else if(typeof btoa=="function"){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);o=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e||(e=A.BLOCK_LITERAL),e!==A.QUOTE_DOUBLE){const l=Math.max(s.options.lineWidth-s.indent.length,s.options.minContentWidth),c=Math.ceil(o.length/l),h=new Array(c);for(let u=0,f=0;u<c;++u,f+=l)h[u]=o.substr(f,l);o=h.join(e===A.BLOCK_LITERAL?`
`:" ")}return Me({comment:n,type:e,value:o},s,i,r)}};function ns(n,e){if(Ee(n))for(let t=0;t<n.items.length;++t){let s=n.items[t];if(!T(s)){if(ve(s)){s.items.length>1&&e("Each pair must have its own sequence indicator");const i=s.items[0]||new P(new A(null));if(s.commentBefore&&(i.key.commentBefore=i.key.commentBefore?`${s.commentBefore}
${i.key.commentBefore}`:s.commentBefore),s.comment){const r=i.value??i.key;r.comment=r.comment?`${s.comment}
${r.comment}`:s.comment}s=i}n.items[t]=T(s)?s:new P(s)}}else e("Expected a sequence for this tag");return n}function ss(n,e,t){const{replacer:s}=t,i=new ee(n);i.tag="tag:yaml.org,2002:pairs";let r=0;if(e&&Symbol.iterator in Object(e))for(let a of e){typeof s=="function"&&(a=s.call(e,String(r++),a));let o,l;if(Array.isArray(a))if(a.length===2)o=a[0],l=a[1];else throw new TypeError(`Expected [key, value] tuple: ${a}`);else if(a&&a instanceof Object){const c=Object.keys(a);if(c.length===1)o=c[0],l=a[o];else throw new TypeError(`Expected { key: value } tuple: ${a}`)}else o=a;i.items.push(Bt(o,l,t))}return i}const Kt={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:ns,createNode:ss};class ye extends ee{constructor(){super(),this.add=D.prototype.add.bind(this),this.delete=D.prototype.delete.bind(this),this.get=D.prototype.get.bind(this),this.has=D.prototype.has.bind(this),this.set=D.prototype.set.bind(this),this.tag=ye.tag}toJSON(e,t){if(!t)return super.toJSON(e);const s=new Map;t!=null&&t.onCreate&&t.onCreate(s);for(const i of this.items){let r,a;if(T(i)?(r=F(i.key,"",t),a=F(i.value,r,t)):r=F(i,"",t),s.has(r))throw new Error("Ordered maps must not include duplicate keys");s.set(r,a)}return s}static from(e,t,s){const i=ss(e,t,s),r=new this;return r.items=i.items,r}}ye.tag="tag:yaml.org,2002:omap";const Ft={collection:"seq",identify:n=>n instanceof Map,nodeClass:ye,default:!1,tag:"tag:yaml.org,2002:omap",resolve(n,e){const t=ns(n,e),s=[];for(const{key:i}of t.items)N(i)&&(s.includes(i.value)?e(`Ordered maps must not include duplicate keys: ${i.value}`):s.push(i.value));return Object.assign(new ye,t)},createNode:(n,e,t)=>ye.from(n,e,t)};function is({value:n,source:e},t){return e&&(n?rs:as).test.test(e)?e:n?t.options.trueStr:t.options.falseStr}const rs={identify:n=>n===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new A(!0),stringify:is},as={identify:n=>n===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new A(!1),stringify:is},or={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:n=>n.slice(-3).toLowerCase()==="nan"?NaN:n[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:G},lr={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:n=>parseFloat(n.replace(/_/g,"")),stringify(n){const e=Number(n.value);return isFinite(e)?e.toExponential():G(n)}},cr={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(n){const e=new A(parseFloat(n.replace(/_/g,""))),t=n.indexOf(".");if(t!==-1){const s=n.substring(t+1).replace(/_/g,"");s[s.length-1]==="0"&&(e.minFractionDigits=s.length)}return e},stringify:G},Pe=n=>typeof n=="bigint"||Number.isInteger(n);function ot(n,e,t,{intAsBigInt:s}){const i=n[0];if((i==="-"||i==="+")&&(e+=1),n=n.substring(e).replace(/_/g,""),s){switch(t){case 2:n=`0b${n}`;break;case 8:n=`0o${n}`;break;case 16:n=`0x${n}`;break}const a=BigInt(n);return i==="-"?BigInt(-1)*a:a}const r=parseInt(n,t);return i==="-"?-1*r:r}function Ut(n,e,t){const{value:s}=n;if(Pe(s)){const i=s.toString(e);return s<0?"-"+t+i.substr(1):t+i}return G(n)}const ur={identify:Pe,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(n,e,t)=>ot(n,2,2,t),stringify:n=>Ut(n,2,"0b")},fr={identify:Pe,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(n,e,t)=>ot(n,1,8,t),stringify:n=>Ut(n,8,"0")},pr={identify:Pe,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(n,e,t)=>ot(n,0,10,t),stringify:G},dr={identify:Pe,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(n,e,t)=>ot(n,2,16,t),stringify:n=>Ut(n,16,"0x")};class ge extends D{constructor(e){super(e),this.tag=ge.tag}add(e){let t;T(e)?t=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?t=new P(e.key,null):t=new P(e,null),ie(this.items,t.key)||this.items.push(t)}get(e,t){const s=ie(this.items,e);return!t&&T(s)?N(s.key)?s.key.value:s.key:s}set(e,t){if(typeof t!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof t}`);const s=ie(this.items,e);s&&!t?this.items.splice(this.items.indexOf(s),1):!s&&t&&this.items.push(new P(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,s){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,s);throw new Error("Set items must all have null values")}static from(e,t,s){const{replacer:i}=s,r=new this(e);if(t&&Symbol.iterator in Object(t))for(let a of t)typeof i=="function"&&(a=i.call(t,a,a)),r.items.push(Bt(a,null,s));return r}}ge.tag="tag:yaml.org,2002:set";const Vt={collection:"map",identify:n=>n instanceof Set,nodeClass:ge,default:!1,tag:"tag:yaml.org,2002:set",createNode:(n,e,t)=>ge.from(n,e,t),resolve(n,e){if(ve(n)){if(n.hasAllNullValues(!0))return Object.assign(new ge,n);e("Set items must all have null values")}else e("Expected a mapping for this tag");return n}};function Ht(n,e){const t=n[0],s=t==="-"||t==="+"?n.substring(1):n,i=a=>e?BigInt(a):Number(a),r=s.replace(/_/g,"").split(":").reduce((a,o)=>a*i(60)+i(o),i(0));return t==="-"?i(-1)*r:r}function os(n){let{value:e}=n,t=a=>a;if(typeof e=="bigint")t=a=>BigInt(a);else if(isNaN(e)||!isFinite(e))return G(n);let s="";e<0&&(s="-",e*=t(-1));const i=t(60),r=[e%i];return e<60?r.unshift(0):(e=(e-r[0])/i,r.unshift(e%i),e>=60&&(e=(e-r[0])/i,r.unshift(e))),s+r.map(a=>String(a).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const ls={identify:n=>typeof n=="bigint"||Number.isInteger(n),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(n,e,{intAsBigInt:t})=>Ht(n,t),stringify:os},cs={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:n=>Ht(n,!1),stringify:os},lt={identify:n=>n instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(n){const e=n.match(lt.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,t,s,i,r,a,o]=e.map(Number),l=e[7]?Number((e[7]+"00").substr(1,3)):0;let c=Date.UTC(t,s-1,i,r||0,a||0,o||0,l);const h=e[8];if(h&&h!=="Z"){let u=Ht(h,!1);Math.abs(u)<30&&(u*=60),c-=6e4*u}return new Date(c)},stringify:({value:n})=>n.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},rn=[Oe,Ae,it,rt,rs,as,ur,fr,pr,dr,or,lr,cr,Rt,Ft,Kt,Vt,ls,cs,lt],an=new Map([["core",sr],["failsafe",[Oe,Ae,it]],["json",ar],["yaml11",rn],["yaml-1.1",rn]]),on={binary:Rt,bool:qt,float:Wn,floatExp:Qn,floatNaN:Yn,floatTime:cs,int:es,intHex:ts,intOct:Zn,intTime:ls,map:Oe,null:rt,omap:Ft,pairs:Kt,seq:Ae,set:Vt,timestamp:lt},hr={"tag:yaml.org,2002:binary":Rt,"tag:yaml.org,2002:omap":Ft,"tag:yaml.org,2002:pairs":Kt,"tag:yaml.org,2002:set":Vt,"tag:yaml.org,2002:timestamp":lt};function mt(n,e){let t=an.get(e);if(!t)if(Array.isArray(n))t=[];else{const s=Array.from(an.keys()).filter(i=>i!=="yaml11").map(i=>JSON.stringify(i)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${s} or define customTags array`)}if(Array.isArray(n))for(const s of n)t=t.concat(s);else typeof n=="function"&&(t=n(t.slice()));return t.map(s=>{if(typeof s!="string")return s;const i=on[s];if(i)return i;const r=Object.keys(on).map(a=>JSON.stringify(a)).join(", ");throw new Error(`Unknown custom tag "${s}"; use one of ${r}`)})}const mr=(n,e)=>n.key<e.key?-1:n.key>e.key?1:0;class ct{constructor({compat:e,customTags:t,merge:s,resolveKnownTags:i,schema:r,sortMapEntries:a,toStringDefaults:o}){this.compat=Array.isArray(e)?mt(e,"compat"):e?mt(null,e):null,this.merge=!!s,this.name=typeof r=="string"&&r||"core",this.knownTags=i?hr:{},this.tags=mt(t,this.name),this.toStringOptions=o??null,Object.defineProperty(this,X,{value:Oe}),Object.defineProperty(this,Q,{value:it}),Object.defineProperty(this,ke,{value:Ae}),this.sortMapEntries=typeof a=="function"?a:a===!0?mr:null}clone(){const e=Object.create(ct.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function yr(n,e){var l;const t=[];let s=e.directives===!0;if(e.directives!==!1&&n.directives){const c=n.directives.toString(n);c?(t.push(c),s=!0):n.directives.docStart&&(s=!0)}s&&t.push("---");const i=Hn(n,e),{commentString:r}=i.options;if(n.commentBefore){t.length!==1&&t.unshift("");const c=r(n.commentBefore);t.unshift(Y(c,""))}let a=!1,o=null;if(n.contents){if(L(n.contents)){if(n.contents.spaceBefore&&s&&t.push(""),n.contents.commentBefore){const u=r(n.contents.commentBefore);t.push(Y(u,""))}i.forceBlockIndent=!!n.comment,o=n.contents.comment}const c=o?void 0:()=>a=!0;let h=be(n.contents,i,()=>o=null,c);o&&(h+=W(h,"",r(o))),(h[0]==="|"||h[0]===">")&&t[t.length-1]==="---"?t[t.length-1]=`--- ${h}`:t.push(h)}else t.push(be(n.contents,i));if((l=n.directives)!=null&&l.docEnd)if(n.comment){const c=r(n.comment);c.includes(`
`)?(t.push("..."),t.push(Y(c,""))):t.push(`... ${c}`)}else t.push("...");else{let c=n.comment;c&&a&&(c=c.replace(/^\n+/,"")),c&&((!a||o)&&t[t.length-1]!==""&&t.push(""),t.push(Y(r(c),"")))}return t.join(`
`)+`
`}class Ne{constructor(e,t,s){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,U,{value:At});let i=null;typeof t=="function"||Array.isArray(t)?i=t:s===void 0&&t&&(s=t,t=void 0);const r=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"},s);this.options=r;let{version:a}=r;s!=null&&s._directives?(this.directives=s._directives.atDocument(),this.directives.yaml.explicit&&(a=this.directives.yaml.version)):this.directives=new B({version:a}),this.setSchema(a,s),this.contents=e===void 0?null:this.createNode(e,i,s)}clone(){const e=Object.create(Ne.prototype,{[U]:{value:At}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=L(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){ue(this.contents)&&this.contents.add(e)}addIn(e,t){ue(this.contents)&&this.contents.addIn(e,t)}createAlias(e,t){if(!e.anchor){const s=Kn(this);e.anchor=!t||s.has(t)?Fn(t||"a",s):t}return new Ze(e.anchor)}createNode(e,t,s){let i;if(typeof t=="function")e=t.call({"":e},"",e),i=t;else if(Array.isArray(t)){const m=S=>typeof S=="number"||S instanceof String||S instanceof Number,k=t.filter(m).map(String);k.length>0&&(t=t.concat(k)),i=t}else s===void 0&&t&&(s=t,t=void 0);const{aliasDuplicateObjects:r,anchorPrefix:a,flow:o,keepUndefined:l,onTagObj:c,tag:h}=s??{},{onAnchor:u,setAnchors:f,sourceObjects:p}=Vi(this,a||"a"),b={aliasDuplicateObjects:r??!0,keepUndefined:l??!1,onAnchor:u,onTagObj:c,replacer:i,schema:this.schema,sourceObjects:p},d=Le(e,h,b);return o&&_(d)&&(d.flow=!0),f(),d}createPair(e,t,s={}){const i=this.createNode(e,null,s),r=this.createNode(t,null,s);return new P(i,r)}delete(e){return ue(this.contents)?this.contents.delete(e):!1}deleteIn(e){return Ie(e)?this.contents==null?!1:(this.contents=null,!0):ue(this.contents)?this.contents.deleteIn(e):!1}get(e,t){return _(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return Ie(e)?!t&&N(this.contents)?this.contents.value:this.contents:_(this.contents)?this.contents.getIn(e,t):void 0}has(e){return _(this.contents)?this.contents.has(e):!1}hasIn(e){return Ie(e)?this.contents!==void 0:_(this.contents)?this.contents.hasIn(e):!1}set(e,t){this.contents==null?this.contents=Ge(this.schema,[e],t):ue(this.contents)&&this.contents.set(e,t)}setIn(e,t){Ie(e)?this.contents=t:this.contents==null?this.contents=Ge(this.schema,Array.from(e),t):ue(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t={}){typeof e=="number"&&(e=String(e));let s;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new B({version:"1.1"}),s={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new B({version:e}),s={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,s=null;break;default:{const i=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(t.schema instanceof Object)this.schema=t.schema;else if(s)this.schema=new ct(Object.assign(s,t));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:t,mapAsMap:s,maxAliasCount:i,onAnchor:r,reviver:a}={}){const o={anchors:new Map,doc:this,keep:!e,mapAsMap:s===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100},l=F(this.contents,t??"",o);if(typeof r=="function")for(const{count:c,res:h}of o.anchors.values())r(h,c);return typeof a=="function"?he(a,{"":l},"",l):l}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const t=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${t}`)}return yr(this,e)}}function ue(n){if(_(n))return!0;throw new Error("Expected a YAML collection as document contents")}class Gt extends Error{constructor(e,t,s,i){super(),this.name=e,this.code=s,this.message=i,this.pos=t}}class re extends Gt{constructor(e,t,s){super("YAMLParseError",e,t,s)}}class us extends Gt{constructor(e,t,s){super("YAMLWarning",e,t,s)}}const ze=(n,e)=>t=>{if(t.pos[0]===-1)return;t.linePos=t.pos.map(o=>e.linePos(o));const{line:s,col:i}=t.linePos[0];t.message+=` at line ${s}, column ${i}`;let r=i-1,a=n.substring(e.lineStarts[s-1],e.lineStarts[s]).replace(/[\n\r]+$/,"");if(r>=60&&a.length>80){const o=Math.min(r-39,a.length-79);a="…"+a.substring(o),r-=o-1}if(a.length>80&&(a=a.substring(0,79)+"…"),s>1&&/^ *$/.test(a.substring(0,r))){let o=n.substring(e.lineStarts[s-2],e.lineStarts[s-1]);o.length>80&&(o=o.substring(0,79)+`…
`),a=o+a}if(/[^ ]/.test(a)){let o=1;const l=t.linePos[1];l&&l.line===s&&l.col>i&&(o=Math.max(1,Math.min(l.col-i,80-r)));const c=" ".repeat(r)+"^".repeat(o);t.message+=`:

${a}
${c}
`}};function we(n,{flow:e,indicator:t,next:s,offset:i,onError:r,startOnNewline:a}){let o=!1,l=a,c=a,h="",u="",f=!1,p=!1,b=!1,d=null,m=null,k=null,S=null,E=null;for(const g of n)switch(b&&(g.type!=="space"&&g.type!=="newline"&&g.type!=="comma"&&r(g.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),b=!1),g.type){case"space":!e&&l&&t!=="doc-start"&&g.source[0]==="	"&&r(g,"TAB_AS_INDENT","Tabs are not allowed as indentation"),c=!0;break;case"comment":{c||r(g,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const I=g.source.substring(1)||" ";h?h+=u+I:h=I,u="",l=!1;break}case"newline":l?h?h+=g.source:o=!0:u+=g.source,l=!0,f=!0,(d||m)&&(p=!0),c=!0;break;case"anchor":d&&r(g,"MULTIPLE_ANCHORS","A node can have at most one anchor"),g.source.endsWith(":")&&r(g.offset+g.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),d=g,E===null&&(E=g.offset),l=!1,c=!1,b=!0;break;case"tag":{m&&r(g,"MULTIPLE_TAGS","A node can have at most one tag"),m=g,E===null&&(E=g.offset),l=!1,c=!1,b=!0;break}case t:(d||m)&&r(g,"BAD_PROP_ORDER",`Anchors and tags must be after the ${g.source} indicator`),S&&r(g,"UNEXPECTED_TOKEN",`Unexpected ${g.source} in ${e??"collection"}`),S=g,l=!1,c=!1;break;case"comma":if(e){k&&r(g,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),k=g,l=!1,c=!1;break}default:r(g,"UNEXPECTED_TOKEN",`Unexpected ${g.type} token`),l=!1,c=!1}const v=n[n.length-1],O=v?v.offset+v.source.length:i;return b&&s&&s.type!=="space"&&s.type!=="newline"&&s.type!=="comma"&&(s.type!=="scalar"||s.source!=="")&&r(s.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:k,found:S,spaceBefore:o,comment:h,hasNewline:f,hasNewlineAfterProp:p,anchor:d,tag:m,end:O,start:E??O}}function xe(n){if(!n)return null;switch(n.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(n.source.includes(`
`))return!0;if(n.end){for(const e of n.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(const e of n.items){for(const t of e.start)if(t.type==="newline")return!0;if(e.sep){for(const t of e.sep)if(t.type==="newline")return!0}if(xe(e.key)||xe(e.value))return!0}return!1;default:return!0}}function _t(n,e,t){if((e==null?void 0:e.type)==="flow-collection"){const s=e.end[0];s.indent===n&&(s.source==="]"||s.source==="}")&&xe(e)&&t(s,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function fs(n,e,t){const{uniqueKeys:s}=n.options;if(s===!1)return!1;const i=typeof s=="function"?s:(r,a)=>r===a||N(r)&&N(a)&&r.value===a.value&&!(r.value==="<<"&&n.schema.merge);return e.some(r=>i(r.key,t))}const ln="All mapping items must start at the same column";function gr({composeNode:n,composeEmptyNode:e},t,s,i,r){var h;const a=(r==null?void 0:r.nodeClass)??D,o=new a(t.schema);t.atRoot&&(t.atRoot=!1);let l=s.offset,c=null;for(const u of s.items){const{start:f,key:p,sep:b,value:d}=u,m=we(f,{indicator:"explicit-key-ind",next:p??(b==null?void 0:b[0]),offset:l,onError:i,startOnNewline:!0}),k=!m.found;if(k){if(p&&(p.type==="block-seq"?i(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in p&&p.indent!==s.indent&&i(l,"BAD_INDENT",ln)),!m.anchor&&!m.tag&&!b){c=m.end,m.comment&&(o.comment?o.comment+=`
`+m.comment:o.comment=m.comment);continue}(m.hasNewlineAfterProp||xe(p))&&i(p??f[f.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else((h=m.found)==null?void 0:h.indent)!==s.indent&&i(l,"BAD_INDENT",ln);const S=m.end,E=p?n(t,p,m,i):e(t,S,f,null,m,i);t.schema.compat&&_t(s.indent,p,i),fs(t,o.items,E)&&i(S,"DUPLICATE_KEY","Map keys must be unique");const v=we(b??[],{indicator:"map-value-ind",next:d,offset:E.range[2],onError:i,startOnNewline:!p||p.type==="block-scalar"});if(l=v.end,v.found){k&&((d==null?void 0:d.type)==="block-map"&&!v.hasNewline&&i(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),t.options.strict&&m.start<v.found.offset-1024&&i(E.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const O=d?n(t,d,v,i):e(t,l,b,null,v,i);t.schema.compat&&_t(s.indent,d,i),l=O.range[2];const g=new P(E,O);t.options.keepSourceTokens&&(g.srcToken=u),o.items.push(g)}else{k&&i(E.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),v.comment&&(E.comment?E.comment+=`
`+v.comment:E.comment=v.comment);const O=new P(E);t.options.keepSourceTokens&&(O.srcToken=u),o.items.push(O)}}return c&&c<l&&i(c,"IMPOSSIBLE","Map comment with trailing content"),o.range=[s.offset,l,c??l],o}function br({composeNode:n,composeEmptyNode:e},t,s,i,r){const a=(r==null?void 0:r.nodeClass)??ee,o=new a(t.schema);t.atRoot&&(t.atRoot=!1);let l=s.offset,c=null;for(const{start:h,value:u}of s.items){const f=we(h,{indicator:"seq-item-ind",next:u,offset:l,onError:i,startOnNewline:!0});if(!f.found)if(f.anchor||f.tag||u)u&&u.type==="block-seq"?i(f.end,"BAD_INDENT","All sequence items must start at the same column"):i(l,"MISSING_CHAR","Sequence item without - indicator");else{c=f.end,f.comment&&(o.comment=f.comment);continue}const p=u?n(t,u,f,i):e(t,f.end,h,null,f,i);t.schema.compat&&_t(s.indent,u,i),l=p.range[2],o.items.push(p)}return o.range=[s.offset,l,c??l],o}function je(n,e,t,s){let i="";if(n){let r=!1,a="";for(const o of n){const{source:l,type:c}=o;switch(c){case"space":r=!0;break;case"comment":{t&&!r&&s(o,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const h=l.substring(1)||" ";i?i+=a+h:i=h,a="";break}case"newline":i&&(a+=l),r=!0;break;default:s(o,"UNEXPECTED_TOKEN",`Unexpected ${c} at node end`)}e+=l.length}}return{comment:i,offset:e}}const yt="Block collections are not allowed within flow collections",gt=n=>n&&(n.type==="block-map"||n.type==="block-seq");function wr({composeNode:n,composeEmptyNode:e},t,s,i,r){const a=s.start.source==="{",o=a?"flow map":"flow sequence",l=(r==null?void 0:r.nodeClass)??(a?D:ee),c=new l(t.schema);c.flow=!0;const h=t.atRoot;h&&(t.atRoot=!1);let u=s.offset+s.start.source.length;for(let m=0;m<s.items.length;++m){const k=s.items[m],{start:S,key:E,sep:v,value:O}=k,g=we(S,{flow:o,indicator:"explicit-key-ind",next:E??(v==null?void 0:v[0]),offset:u,onError:i,startOnNewline:!1});if(!g.found){if(!g.anchor&&!g.tag&&!v&&!O){m===0&&g.comma?i(g.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${o}`):m<s.items.length-1&&i(g.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${o}`),g.comment&&(c.comment?c.comment+=`
`+g.comment:c.comment=g.comment),u=g.end;continue}!a&&t.options.strict&&xe(E)&&i(E,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(m===0)g.comma&&i(g.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${o}`);else if(g.comma||i(g.start,"MISSING_CHAR",`Missing , between ${o} items`),g.comment){let I="";e:for(const C of S)switch(C.type){case"comma":case"space":break;case"comment":I=C.source.substring(1);break e;default:break e}if(I){let C=c.items[c.items.length-1];T(C)&&(C=C.value??C.key),C.comment?C.comment+=`
`+I:C.comment=I,g.comment=g.comment.substring(I.length+1)}}if(!a&&!v&&!g.found){const I=O?n(t,O,g,i):e(t,g.end,v,null,g,i);c.items.push(I),u=I.range[2],gt(O)&&i(I.range,"BLOCK_IN_FLOW",yt)}else{const I=g.end,C=E?n(t,E,g,i):e(t,I,S,null,g,i);gt(E)&&i(C.range,"BLOCK_IN_FLOW",yt);const $=we(v??[],{flow:o,indicator:"map-value-ind",next:O,offset:C.range[2],onError:i,startOnNewline:!1});if($.found){if(!a&&!g.found&&t.options.strict){if(v)for(const x of v){if(x===$.found)break;if(x.type==="newline"){i(x,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}g.start<$.found.offset-1024&&i($.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else O&&("source"in O&&O.source&&O.source[0]===":"?i(O,"MISSING_CHAR",`Missing space after : in ${o}`):i($.start,"MISSING_CHAR",`Missing , or : between ${o} items`));const te=O?n(t,O,$,i):$.found?e(t,$.end,v,null,$,i):null;te?gt(O)&&i(te.range,"BLOCK_IN_FLOW",yt):$.comment&&(C.comment?C.comment+=`
`+$.comment:C.comment=$.comment);const ce=new P(C,te);if(t.options.keepSourceTokens&&(ce.srcToken=k),a){const x=c;fs(t,x.items,C)&&i(I,"DUPLICATE_KEY","Map keys must be unique"),x.items.push(ce)}else{const x=new D(t.schema);x.flow=!0,x.items.push(ce),c.items.push(x)}u=te?te.range[2]:$.end}}const f=a?"}":"]",[p,...b]=s.end;let d=u;if(p&&p.source===f)d=p.offset+p.source.length;else{const m=o[0].toUpperCase()+o.substring(1),k=h?`${m} must end with a ${f}`:`${m} in block collection must be sufficiently indented and end with a ${f}`;i(u,h?"MISSING_CHAR":"BAD_INDENT",k),p&&p.source.length!==1&&b.unshift(p)}if(b.length>0){const m=je(b,d,t.options.strict,i);m.comment&&(c.comment?c.comment+=`
`+m.comment:c.comment=m.comment),c.range=[s.offset,d,m.offset]}else c.range=[s.offset,d,d];return c}function bt(n,e,t,s,i,r){const a=t.type==="block-map"?gr(n,e,t,s,r):t.type==="block-seq"?br(n,e,t,s,r):wr(n,e,t,s,r),o=a.constructor;return i==="!"||i===o.tagName?(a.tag=o.tagName,a):(i&&(a.tag=i),a)}function kr(n,e,t,s,i){var u;const r=s?e.directives.tagName(s.source,f=>i(s,"TAG_RESOLVE_FAILED",f)):null,a=t.type==="block-map"?"map":t.type==="block-seq"?"seq":t.start.source==="{"?"map":"seq";if(!s||!r||r==="!"||r===D.tagName&&a==="map"||r===ee.tagName&&a==="seq"||!a)return bt(n,e,t,i,r);let o=e.schema.tags.find(f=>f.tag===r&&f.collection===a);if(!o){const f=e.schema.knownTags[r];if(f&&f.collection===a)e.schema.tags.push(Object.assign({},f,{default:!1})),o=f;else return f!=null&&f.collection?i(s,"BAD_COLLECTION_TYPE",`${f.tag} used for ${a} collection, but expects ${f.collection}`,!0):i(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${r}`,!0),bt(n,e,t,i,r)}const l=bt(n,e,t,i,r,o),c=((u=o.resolve)==null?void 0:u.call(o,l,f=>i(s,"TAG_RESOLVE_FAILED",f),e.options))??l,h=L(c)?c:new A(c);return h.range=l.range,h.tag=r,o!=null&&o.format&&(h.format=o.format),h}function ps(n,e,t){const s=n.offset,i=Sr(n,e,t);if(!i)return{value:"",type:null,comment:"",range:[s,s,s]};const r=i.mode===">"?A.BLOCK_FOLDED:A.BLOCK_LITERAL,a=n.source?vr(n.source):[];let o=a.length;for(let d=a.length-1;d>=0;--d){const m=a[d][1];if(m===""||m==="\r")o=d;else break}if(o===0){const d=i.chomp==="+"&&a.length>0?`
`.repeat(Math.max(1,a.length-1)):"";let m=s+i.length;return n.source&&(m+=n.source.length),{value:d,type:r,comment:i.comment,range:[s,m,m]}}let l=n.indent+i.indent,c=n.offset+i.length,h=0;for(let d=0;d<o;++d){const[m,k]=a[d];if(k===""||k==="\r")i.indent===0&&m.length>l&&(l=m.length);else{if(m.length<l){const S="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";t(c+m.length,"MISSING_CHAR",S)}i.indent===0&&(l=m.length),h=d;break}c+=m.length+k.length+1}for(let d=a.length-1;d>=o;--d)a[d][0].length>l&&(o=d+1);let u="",f="",p=!1;for(let d=0;d<h;++d)u+=a[d][0].slice(l)+`
`;for(let d=h;d<o;++d){let[m,k]=a[d];c+=m.length+k.length+1;const S=k[k.length-1]==="\r";if(S&&(k=k.slice(0,-1)),k&&m.length<l){const v=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;t(c-k.length-(S?2:1),"BAD_INDENT",v),m=""}r===A.BLOCK_LITERAL?(u+=f+m.slice(l)+k,f=`
`):m.length>l||k[0]==="	"?(f===" "?f=`
`:!p&&f===`
`&&(f=`

`),u+=f+m.slice(l)+k,f=`
`,p=!0):k===""?f===`
`?u+=`
`:f=`
`:(u+=f+k,f=" ",p=!1)}switch(i.chomp){case"-":break;case"+":for(let d=o;d<a.length;++d)u+=`
`+a[d][0].slice(l);u[u.length-1]!==`
`&&(u+=`
`);break;default:u+=`
`}const b=s+i.length+n.source.length;return{value:u,type:r,comment:i.comment,range:[s,b,b]}}function Sr({offset:n,props:e},t,s){if(e[0].type!=="block-scalar-header")return s(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:i}=e[0],r=i[0];let a=0,o="",l=-1;for(let f=1;f<i.length;++f){const p=i[f];if(!o&&(p==="-"||p==="+"))o=p;else{const b=Number(p);!a&&b?a=b:l===-1&&(l=n+f)}}l!==-1&&s(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let c=!1,h="",u=i.length;for(let f=1;f<e.length;++f){const p=e[f];switch(p.type){case"space":c=!0;case"newline":u+=p.source.length;break;case"comment":t&&!c&&s(p,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),u+=p.source.length,h=p.source.substring(1);break;case"error":s(p,"UNEXPECTED_TOKEN",p.message),u+=p.source.length;break;default:{const b=`Unexpected token in block scalar header: ${p.type}`;s(p,"UNEXPECTED_TOKEN",b);const d=p.source;d&&typeof d=="string"&&(u+=d.length)}}}return{mode:r,indent:a,chomp:o,comment:h,length:u}}function vr(n){const e=n.split(/\n( *)/),t=e[0],s=t.match(/^( *)/),r=[s!=null&&s[1]?[s[1],t.slice(s[1].length)]:["",t]];for(let a=1;a<e.length;a+=2)r.push([e[a],e[a+1]]);return r}function ds(n,e,t){const{offset:s,type:i,source:r,end:a}=n;let o,l;const c=(f,p,b)=>t(s+f,p,b);switch(i){case"scalar":o=A.PLAIN,l=Er(r,c);break;case"single-quoted-scalar":o=A.QUOTE_SINGLE,l=Or(r,c);break;case"double-quoted-scalar":o=A.QUOTE_DOUBLE,l=Ar(r,c);break;default:return t(n,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[s,s+r.length,s+r.length]}}const h=s+r.length,u=je(a,h,e,t);return{value:l,type:o,comment:u.comment,range:[s,h,u.offset]}}function Er(n,e){let t="";switch(n[0]){case"	":t="a tab character";break;case",":t="flow indicator character ,";break;case"%":t="directive indicator character %";break;case"|":case">":{t=`block scalar indicator ${n[0]}`;break}case"@":case"`":{t=`reserved character ${n[0]}`;break}}return t&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${t}`),hs(n)}function Or(n,e){return(n[n.length-1]!=="'"||n.length===1)&&e(n.length,"MISSING_CHAR","Missing closing 'quote"),hs(n.slice(1,-1)).replace(/''/g,"'")}function hs(n){let e,t;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),t=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,t=/[ \t]*(.*?)[ \t]*\r?\n/sy}let s=e.exec(n);if(!s)return n;let i=s[1],r=" ",a=e.lastIndex;for(t.lastIndex=a;s=t.exec(n);)s[1]===""?r===`
`?i+=r:r=`
`:(i+=r+s[1],r=" "),a=t.lastIndex;const o=/[ \t]*(.*)/sy;return o.lastIndex=a,s=o.exec(n),i+r+((s==null?void 0:s[1])??"")}function Ar(n,e){let t="";for(let s=1;s<n.length-1;++s){const i=n[s];if(!(i==="\r"&&n[s+1]===`
`))if(i===`
`){const{fold:r,offset:a}=Nr(n,s);t+=r,s=a}else if(i==="\\"){let r=n[++s];const a=Tr[r];if(a)t+=a;else if(r===`
`)for(r=n[s+1];r===" "||r==="	";)r=n[++s+1];else if(r==="\r"&&n[s+1]===`
`)for(r=n[++s+1];r===" "||r==="	";)r=n[++s+1];else if(r==="x"||r==="u"||r==="U"){const o={x:2,u:4,U:8}[r];t+=Ir(n,s+1,o,e),s+=o}else{const o=n.substr(s-1,2);e(s-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${o}`),t+=o}}else if(i===" "||i==="	"){const r=s;let a=n[s+1];for(;a===" "||a==="	";)a=n[++s+1];a!==`
`&&!(a==="\r"&&n[s+2]===`
`)&&(t+=s>r?n.slice(r,s+1):i)}else t+=i}return(n[n.length-1]!=='"'||n.length===1)&&e(n.length,"MISSING_CHAR",'Missing closing "quote'),t}function Nr(n,e){let t="",s=n[e+1];for(;(s===" "||s==="	"||s===`
`||s==="\r")&&!(s==="\r"&&n[e+2]!==`
`);)s===`
`&&(t+=`
`),e+=1,s=n[e+1];return t||(t=" "),{fold:t,offset:e}}const Tr={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:" ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function Ir(n,e,t,s){const i=n.substr(e,t),a=i.length===t&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(a)){const o=n.substr(e-2,t+2);return s(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${o}`),o}return String.fromCodePoint(a)}function ms(n,e,t,s){const{value:i,type:r,comment:a,range:o}=e.type==="block-scalar"?ps(e,n.options.strict,s):ds(e,n.options.strict,s),l=t?n.directives.tagName(t.source,u=>s(t,"TAG_RESOLVE_FAILED",u)):null,c=t&&l?_r(n.schema,i,l,t,s):e.type==="scalar"?Cr(n,i,e,s):n.schema[Q];let h;try{const u=c.resolve(i,f=>s(t??e,"TAG_RESOLVE_FAILED",f),n.options);h=N(u)?u:new A(u)}catch(u){const f=u instanceof Error?u.message:String(u);s(t??e,"TAG_RESOLVE_FAILED",f),h=new A(i)}return h.range=o,h.source=i,r&&(h.type=r),l&&(h.tag=l),c.format&&(h.format=c.format),a&&(h.comment=a),h}function _r(n,e,t,s,i){var o;if(t==="!")return n[Q];const r=[];for(const l of n.tags)if(!l.collection&&l.tag===t)if(l.default&&l.test)r.push(l);else return l;for(const l of r)if((o=l.test)!=null&&o.test(e))return l;const a=n.knownTags[t];return a&&!a.collection?(n.tags.push(Object.assign({},a,{default:!1,test:void 0})),a):(i(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${t}`,t!=="tag:yaml.org,2002:str"),n[Q])}function Cr({directives:n,schema:e},t,s,i){const r=e.tags.find(a=>{var o;return a.default&&((o=a.test)==null?void 0:o.test(t))})||e[Q];if(e.compat){const a=e.compat.find(o=>{var l;return o.default&&((l=o.test)==null?void 0:l.test(t))})??e[Q];if(r.tag!==a.tag){const o=n.tagString(r.tag),l=n.tagString(a.tag),c=`Value may be parsed as either ${o} or ${l}`;i(s,"TAG_RESOLVE_FAILED",c,!0)}}return r}function Lr(n,e,t){if(e){t===null&&(t=e.length);for(let s=t-1;s>=0;--s){let i=e[s];switch(i.type){case"space":case"comment":case"newline":n-=i.source.length;continue}for(i=e[++s];(i==null?void 0:i.type)==="space";)n+=i.source.length,i=e[++s];break}}return n}const xr={composeNode:ys,composeEmptyNode:Jt};function ys(n,e,t,s){const{spaceBefore:i,comment:r,anchor:a,tag:o}=t;let l,c=!0;switch(e.type){case"alias":l=$r(n,e,s),(a||o)&&s(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":l=ms(n,e,o,s),a&&(l.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":l=kr(xr,n,e,o,s),a&&(l.anchor=a.source.substring(1));break;default:{const h=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;s(e,"UNEXPECTED_TOKEN",h),l=Jt(n,e.offset,void 0,null,t,s),c=!1}}return a&&l.anchor===""&&s(a,"BAD_ALIAS","Anchor cannot be an empty string"),i&&(l.spaceBefore=!0),r&&(e.type==="scalar"&&e.source===""?l.comment=r:l.commentBefore=r),n.options.keepSourceTokens&&c&&(l.srcToken=e),l}function Jt(n,e,t,s,{spaceBefore:i,comment:r,anchor:a,tag:o,end:l},c){const h={type:"scalar",offset:Lr(e,t,s),indent:-1,source:""},u=ms(n,h,o,c);return a&&(u.anchor=a.source.substring(1),u.anchor===""&&c(a,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(u.spaceBefore=!0),r&&(u.comment=r,u.range[2]=l),u}function $r({options:n},{offset:e,source:t,end:s},i){const r=new Ze(t.substring(1));r.source===""&&i(e,"BAD_ALIAS","Alias cannot be an empty string"),r.source.endsWith(":")&&i(e+t.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const a=e+t.length,o=je(s,a,n.strict,i);return r.range=[e,a,o.offset],o.comment&&(r.comment=o.comment),r}function Mr(n,e,{offset:t,start:s,value:i,end:r},a){const o=Object.assign({_directives:e},n),l=new Ne(void 0,o),c={atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},h=we(s,{indicator:"doc-start",next:i??(r==null?void 0:r[0]),offset:t,onError:a,startOnNewline:!0});h.found&&(l.directives.docStart=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!h.hasNewline&&a(h.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=i?ys(c,i,h,a):Jt(c,h.end,s,null,h,a);const u=l.contents.range[2],f=je(r,u,!1,a);return f.comment&&(l.comment=f.comment),l.range=[t,u,f.offset],l}function Te(n){if(typeof n=="number")return[n,n+1];if(Array.isArray(n))return n.length===2?n:[n[0],n[1]];const{offset:e,source:t}=n;return[e,e+(typeof t=="string"?t.length:1)]}function cn(n){var i;let e="",t=!1,s=!1;for(let r=0;r<n.length;++r){const a=n[r];switch(a[0]){case"#":e+=(e===""?"":s?`

`:`
`)+(a.substring(1)||" "),t=!0,s=!1;break;case"%":((i=n[r+1])==null?void 0:i[0])!=="#"&&(r+=1),t=!1;break;default:t||(s=!0),t=!1}}return{comment:e,afterEmptyLine:s}}class zt{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(t,s,i,r)=>{const a=Te(t);r?this.warnings.push(new us(a,s,i)):this.errors.push(new re(a,s,i))},this.directives=new B({version:e.version||"1.2"}),this.options=e}decorate(e,t){const{comment:s,afterEmptyLine:i}=cn(this.prelude);if(s){const r=e.contents;if(t)e.comment=e.comment?`${e.comment}
${s}`:s;else if(i||e.directives.docStart||!r)e.commentBefore=s;else if(_(r)&&!r.flow&&r.items.length>0){let a=r.items[0];T(a)&&(a=a.key);const o=a.commentBefore;a.commentBefore=o?`${s}
${o}`:s}else{const a=r.commentBefore;r.commentBefore=a?`${s}
${a}`:s}}t?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:cn(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,t=!1,s=-1){for(const i of e)yield*this.next(i);yield*this.end(t,s)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(t,s,i)=>{const r=Te(e);r[0]+=t,this.onError(r,"BAD_DIRECTIVE",s,i)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const t=Mr(this.options,this.directives,e,this.onError);this.atDirectives&&!t.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(t,!1),this.doc&&(yield this.doc),this.doc=t,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const t=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,s=new re(Te(e),"UNEXPECTED_TOKEN",t);this.atDirectives||!this.doc?this.errors.push(s):this.doc.errors.push(s);break}case"doc-end":{if(!this.doc){const s="Unexpected doc-end without preceding document";this.errors.push(new re(Te(e),"UNEXPECTED_TOKEN",s));break}this.doc.directives.docEnd=!0;const t=je(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),t.comment){const s=this.doc.comment;this.doc.comment=s?`${s}
${t.comment}`:t.comment}this.doc.range[2]=t.offset;break}default:this.errors.push(new re(Te(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,t=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const s=Object.assign({_directives:this.directives},this.options),i=new Ne(void 0,s);this.atDirectives&&this.onError(t,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,t,t],this.decorate(i,!1),yield i}}}function Pr(n,e=!0,t){if(n){const s=(i,r,a)=>{const o=typeof i=="number"?i:Array.isArray(i)?i[0]:i.offset;if(t)t(o,r,a);else throw new re([o,o+1],r,a)};switch(n.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return ds(n,e,s);case"block-scalar":return ps(n,e,s)}}return null}function jr(n,e){const{implicitKey:t=!1,indent:s,inFlow:i=!1,offset:r=-1,type:a="PLAIN"}=e,o=Me({type:a,value:n},{implicitKey:t,indent:s>0?" ".repeat(s):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}}),l=e.end??[{type:"newline",offset:-1,indent:s,source:`
`}];switch(o[0]){case"|":case">":{const c=o.indexOf(`
`),h=o.substring(0,c),u=o.substring(c+1)+`
`,f=[{type:"block-scalar-header",offset:r,indent:s,source:h}];return gs(f,l)||f.push({type:"newline",offset:-1,indent:s,source:`
`}),{type:"block-scalar",offset:r,indent:s,props:f,source:u}}case'"':return{type:"double-quoted-scalar",offset:r,indent:s,source:o,end:l};case"'":return{type:"single-quoted-scalar",offset:r,indent:s,source:o,end:l};default:return{type:"scalar",offset:r,indent:s,source:o,end:l}}}function Br(n,e,t={}){let{afterKey:s=!1,implicitKey:i=!1,inFlow:r=!1,type:a}=t,o="indent"in n?n.indent:null;if(s&&typeof o=="number"&&(o+=2),!a)switch(n.type){case"single-quoted-scalar":a="QUOTE_SINGLE";break;case"double-quoted-scalar":a="QUOTE_DOUBLE";break;case"block-scalar":{const c=n.props[0];if(c.type!=="block-scalar-header")throw new Error("Invalid block scalar header");a=c.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:a="PLAIN"}const l=Me({type:a,value:e},{implicitKey:i||o===null,indent:o!==null&&o>0?" ".repeat(o):"",inFlow:r,options:{blockQuote:!0,lineWidth:-1}});switch(l[0]){case"|":case">":qr(n,l);break;case'"':wt(n,l,"double-quoted-scalar");break;case"'":wt(n,l,"single-quoted-scalar");break;default:wt(n,l,"scalar")}}function qr(n,e){const t=e.indexOf(`
`),s=e.substring(0,t),i=e.substring(t+1)+`
`;if(n.type==="block-scalar"){const r=n.props[0];if(r.type!=="block-scalar-header")throw new Error("Invalid block scalar header");r.source=s,n.source=i}else{const{offset:r}=n,a="indent"in n?n.indent:-1,o=[{type:"block-scalar-header",offset:r,indent:a,source:s}];gs(o,"end"in n?n.end:void 0)||o.push({type:"newline",offset:-1,indent:a,source:`
`});for(const l of Object.keys(n))l!=="type"&&l!=="offset"&&delete n[l];Object.assign(n,{type:"block-scalar",indent:a,props:o,source:i})}}function gs(n,e){if(e)for(const t of e)switch(t.type){case"space":case"comment":n.push(t);break;case"newline":return n.push(t),!0}return!1}function wt(n,e,t){switch(n.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":n.type=t,n.source=e;break;case"block-scalar":{const s=n.props.slice(1);let i=e.length;n.props[0].type==="block-scalar-header"&&(i-=n.props[0].source.length);for(const r of s)r.offset+=i;delete n.props,Object.assign(n,{type:t,source:e,end:s});break}case"block-map":case"block-seq":{const i={type:"newline",offset:n.offset+e.length,indent:n.indent,source:`
`};delete n.items,Object.assign(n,{type:t,source:e,end:[i]});break}default:{const s="indent"in n?n.indent:-1,i="end"in n&&Array.isArray(n.end)?n.end.filter(r=>r.type==="space"||r.type==="comment"||r.type==="newline"):[];for(const r of Object.keys(n))r!=="type"&&r!=="offset"&&delete n[r];Object.assign(n,{type:t,indent:s,source:e,end:i})}}}const Dr=n=>"type"in n?Ye(n):He(n);function Ye(n){switch(n.type){case"block-scalar":{let e="";for(const t of n.props)e+=Ye(t);return e+n.source}case"block-map":case"block-seq":{let e="";for(const t of n.items)e+=He(t);return e}case"flow-collection":{let e=n.start.source;for(const t of n.items)e+=He(t);for(const t of n.end)e+=t.source;return e}case"document":{let e=He(n);if(n.end)for(const t of n.end)e+=t.source;return e}default:{let e=n.source;if("end"in n&&n.end)for(const t of n.end)e+=t.source;return e}}}function He({start:n,key:e,sep:t,value:s}){let i="";for(const r of n)i+=r.source;if(e&&(i+=Ye(e)),t)for(const r of t)i+=r.source;return s&&(i+=Ye(s)),i}const Ct=Symbol("break visit"),Rr=Symbol("skip children"),bs=Symbol("remove item");function ae(n,e){"type"in n&&n.type==="document"&&(n={start:n.start,value:n.value}),ws(Object.freeze([]),n,e)}ae.BREAK=Ct;ae.SKIP=Rr;ae.REMOVE=bs;ae.itemAtPath=(n,e)=>{let t=n;for(const[s,i]of e){const r=t==null?void 0:t[s];if(r&&"items"in r)t=r.items[i];else return}return t};ae.parentCollection=(n,e)=>{const t=ae.itemAtPath(n,e.slice(0,-1)),s=e[e.length-1][0],i=t==null?void 0:t[s];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function ws(n,e,t){let s=t(e,n);if(typeof s=="symbol")return s;for(const i of["key","value"]){const r=e[i];if(r&&"items"in r){for(let a=0;a<r.items.length;++a){const o=ws(Object.freeze(n.concat([[i,a]])),r.items[a],t);if(typeof o=="number")a=o-1;else{if(o===Ct)return Ct;o===bs&&(r.items.splice(a,1),a-=1)}}typeof s=="function"&&i==="key"&&(s=s(e,n))}}return typeof s=="function"?s(e,n):s}const ut="\uFEFF",ft="",pt="",$e="",Kr=n=>!!n&&"items"in n,Fr=n=>!!n&&(n.type==="scalar"||n.type==="single-quoted-scalar"||n.type==="double-quoted-scalar"||n.type==="block-scalar");function Ur(n){switch(n){case ut:return"<BOM>";case ft:return"<DOC>";case pt:return"<FLOW_END>";case $e:return"<SCALAR>";default:return JSON.stringify(n)}}function ks(n){switch(n){case ut:return"byte-order-mark";case ft:return"doc-mode";case pt:return"flow-error-end";case $e:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(n[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}const Vr=Object.freeze(Object.defineProperty({__proto__:null,BOM:ut,DOCUMENT:ft,FLOW_END:pt,SCALAR:$e,createScalarToken:jr,isCollection:Kr,isScalar:Fr,prettyToken:Ur,resolveAsScalar:Pr,setScalarValue:Br,stringify:Dr,tokenType:ks,visit:ae},Symbol.toStringTag,{value:"Module"}));function K(n){switch(n){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const un="0123456789ABCDEFabcdef".split(""),Hr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),kt=",[]{}".split(""),Gr=` ,[]{}
\r	`.split(""),St=n=>!n||Gr.includes(n);class Ss{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,t=!1){e&&(this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null),this.atEnd=!t;let s=this.next??"stream";for(;s&&(t||this.hasChars(1));)s=yield*this.parseNext(s)}atLineEnd(){let e=this.pos,t=this.buffer[e];for(;t===" "||t==="	";)t=this.buffer[++e];return!t||t==="#"||t===`
`?!0:t==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let t=this.buffer[e];if(this.indentNext>0){let s=0;for(;t===" ";)t=this.buffer[++s+e];if(t==="\r"){const i=this.buffer[s+e+1];if(i===`
`||!i&&!this.atEnd)return e+s+1}return t===`
`||s>=this.indentNext||!t&&!this.atEnd?e+s:-1}if(t==="-"||t==="."){const s=this.buffer.substr(e,3);if((s==="---"||s==="...")&&K(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===ut&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let t=e.length;const s=e.indexOf("#");if(s!==-1){const r=e[s-1];(r===" "||r==="	")&&(t=s-1)}for(;;){const r=e[t-1];if(r===" "||r==="	")t-=1;else break}const i=(yield*this.pushCount(t))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){const t=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-t),yield*this.pushNewline(),"stream"}return yield ft,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const t=this.peek(3);if(t==="---"&&K(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if(t==="..."&&K(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!K(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,t]=this.peek(2);if(!t&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&K(t)){const s=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=s,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(e===null)return this.setNext("doc");let t=yield*this.pushIndicators();switch(e[t]){case"#":yield*this.pushCount(e.length-t);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(St),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return t+=yield*this.parseBlockScalarHeader(),t+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-t),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,t,s=-1;do e=yield*this.pushNewline(),e>0?(t=yield*this.pushSpaces(!1),this.indentValue=s=t):t=0,t+=yield*this.pushSpaces(!0);while(e+t>0);const i=this.getLine();if(i===null)return this.setNext("flow");if((s!==-1&&s<this.indentNext&&i[0]!=="#"||s===0&&(i.startsWith("---")||i.startsWith("..."))&&K(i[3]))&&!(s===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield pt,yield*this.parseLineStart();let r=0;for(;i[r]===",";)r+=yield*this.pushCount(1),r+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(r+=yield*this.pushIndicators(),i[r]){case void 0:return"flow";case"#":return yield*this.pushCount(i.length-r),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(St),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const a=this.charAt(1);if(this.flowKey||K(a)||a===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let t=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;t!==-1&&this.buffer[t+1]==="'";)t=this.buffer.indexOf("'",t+2);else for(;t!==-1;){let r=0;for(;this.buffer[t-1-r]==="\\";)r+=1;if(r%2===0)break;t=this.buffer.indexOf('"',t+1)}const s=this.buffer.substring(0,t);let i=s.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){const r=this.continueScalar(i+1);if(r===-1)break;i=s.indexOf(`
`,r)}i!==-1&&(t=i-(s[i-1]==="\r"?2:1))}if(t===-1){if(!this.atEnd)return this.setNext("quoted-scalar");t=this.buffer.length}return yield*this.pushToIndex(t+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const t=this.buffer[++e];if(t==="+")this.blockScalarKeep=!0;else if(t>"0"&&t<="9")this.blockScalarIndent=Number(t)-1;else if(t!=="-")break}return yield*this.pushUntil(t=>K(t)||t==="#")}*parseBlockScalar(){let e=this.pos-1,t=0,s;e:for(let i=this.pos;s=this.buffer[i];++i)switch(s){case" ":t+=1;break;case`
`:e=i,t=0;break;case"\r":{const r=this.buffer[i+1];if(!r&&!this.atEnd)return this.setNext("block-scalar");if(r===`
`)break}default:break e}if(!s&&!this.atEnd)return this.setNext("block-scalar");if(t>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=t:this.indentNext+=this.blockScalarIndent;do{const i=this.continueScalar(e+1);if(i===-1)break;e=this.buffer.indexOf(`
`,i)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}if(!this.blockScalarKeep)do{let i=e-1,r=this.buffer[i];r==="\r"&&(r=this.buffer[--i]);const a=i;for(;r===" "||r==="	";)r=this.buffer[--i];if(r===`
`&&i>=this.pos&&i+1+t>a)e=i;else break}while(!0);return yield $e,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let t=this.pos-1,s=this.pos-1,i;for(;i=this.buffer[++s];)if(i===":"){const r=this.buffer[s+1];if(K(r)||e&&r===",")break;t=s}else if(K(i)){let r=this.buffer[s+1];if(i==="\r"&&(r===`
`?(s+=1,i=`
`,r=this.buffer[s+1]):t=s),r==="#"||e&&kt.includes(r))break;if(i===`
`){const a=this.continueScalar(s+1);if(a===-1)break;s=Math.max(s,a-2)}}else{if(e&&kt.includes(i))break;t=s}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield $e,yield*this.pushToIndex(t+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,t){const s=this.buffer.slice(this.pos,e);return s?(yield s,this.pos+=s.length,s.length):(t&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(St))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,t=this.charAt(1);if(K(t)||e&&kt.includes(t))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,t=this.buffer[e];for(;!K(t)&&t!==">";)t=this.buffer[++e];return yield*this.pushToIndex(t===">"?e+1:e,!1)}else{let e=this.pos+1,t=this.buffer[e];for(;t;)if(Hr.includes(t))t=this.buffer[++e];else if(t==="%"&&un.includes(this.buffer[e+1])&&un.includes(this.buffer[e+2]))t=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let t=this.pos-1,s;do s=this.buffer[++t];while(s===" "||e&&s==="	");const i=t-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=t),i}*pushUntil(e){let t=this.pos,s=this.buffer[t];for(;!e(s);)s=this.buffer[++t];return yield*this.pushToIndex(t,!1)}}class vs{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let t=0,s=this.lineStarts.length;for(;t<s;){const r=t+s>>1;this.lineStarts[r]<e?t=r+1:s=r}if(this.lineStarts[t]===e)return{line:t+1,col:1};if(t===0)return{line:0,col:e};const i=this.lineStarts[t-1];return{line:t,col:e-i+1}}}}function V(n,e){for(let t=0;t<n.length;++t)if(n[t].type===e)return!0;return!1}function fn(n){for(let e=0;e<n.length;++e)switch(n[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function Es(n){switch(n==null?void 0:n.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function De(n){switch(n.type){case"document":return n.start;case"block-map":{const e=n.items[n.items.length-1];return e.sep??e.start}case"block-seq":return n.items[n.items.length-1].start;default:return[]}}function fe(n){var t;if(n.length===0)return[];let e=n.length;e:for(;--e>=0;)switch(n[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;((t=n[++e])==null?void 0:t.type)==="space";);return n.splice(e,n.length)}function pn(n){if(n.start.type==="flow-seq-start")for(const e of n.items)e.sep&&!e.value&&!V(e.start,"explicit-key-ind")&&!V(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,Es(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class Yt{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Ss,this.onNewLine=e}*parse(e,t=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const s of this.lexer.lex(e,t))yield*this.next(s);t||(yield*this.end())}*next(e){if(this.source=e,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}const t=ks(e);if(t)if(t==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=t,yield*this.step(),t){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const s=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:s,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){const t=e??this.stack.pop();if(t)if(this.stack.length===0)yield t;else{const s=this.peek(1);switch(t.type==="block-scalar"?t.indent="indent"in s?s.indent:0:t.type==="flow-collection"&&s.type==="document"&&(t.indent=0),t.type==="flow-collection"&&pn(t),s.type){case"document":s.value=t;break;case"block-scalar":s.props.push(t);break;case"block-map":{const i=s.items[s.items.length-1];if(i.value){s.items.push({start:[],key:t,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=t;else{Object.assign(i,{key:t,sep:[]}),this.onKeyLine=!V(i.start,"explicit-key-ind");return}break}case"block-seq":{const i=s.items[s.items.length-1];i.value?s.items.push({start:[],value:t}):i.value=t;break}case"flow-collection":{const i=s.items[s.items.length-1];!i||i.value?s.items.push({start:[],key:t,sep:[]}):i.sep?i.value=t:Object.assign(i,{key:t,sep:[]});return}default:yield*this.pop(),yield*this.pop(t)}if((s.type==="document"||s.type==="block-map"||s.type==="block-seq")&&(t.type==="block-map"||t.type==="block-seq")){const i=t.items[t.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&fn(i.start)===-1&&(t.indent===0||i.start.every(r=>r.type!=="comment"||r.indent<t.indent))&&(s.type==="document"?s.end=i.start:s.items.push({start:i.start}),t.items.splice(-1,1))}}else{const s="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:s}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{fn(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}const t=this.startBlockValue(e);t?this.stack.push(t):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){const t=De(this.peek(2)),s=fe(t);let i;e.end?(i=e.end,i.push(this.sourceToken),delete e.end):i=[this.sourceToken];const r={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:s,key:e,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=r}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let t=this.source.indexOf(`
`)+1;for(;t!==0;)this.onNewLine(this.offset+t),t=this.source.indexOf(`
`,t)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){var s;const t=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,t.value){const i="end"in t.value?t.value.end:void 0,r=Array.isArray(i)?i[i.length-1]:void 0;(r==null?void 0:r.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else if(t.sep)t.sep.push(this.sourceToken);else{if(this.atIndentedComment(t.start,e.indent)){const i=e.items[e.items.length-2],r=(s=i==null?void 0:i.value)==null?void 0:s.end;if(Array.isArray(r)){Array.prototype.push.apply(r,t.start),r.push(this.sourceToken),e.items.pop();return}}t.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const i=!this.onKeyLine&&this.indent===e.indent&&t.sep;let r=[];if(i&&t.sep&&!t.value){const a=[];for(let o=0;o<t.sep.length;++o){const l=t.sep[o];switch(l.type){case"newline":a.push(o);break;case"space":break;case"comment":l.indent>e.indent&&(a.length=0);break;default:a.length=0}}a.length>=2&&(r=t.sep.splice(a[1]))}switch(this.type){case"anchor":case"tag":i||t.value?(r.push(this.sourceToken),e.items.push({start:r}),this.onKeyLine=!0):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"explicit-key-ind":!t.sep&&!V(t.start,"explicit-key-ind")?t.start.push(this.sourceToken):i||t.value?(r.push(this.sourceToken),e.items.push({start:r})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}),this.onKeyLine=!0;return;case"map-value-ind":if(V(t.start,"explicit-key-ind"))if(t.sep)if(t.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(V(t.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]});else if(Es(t.key)&&!V(t.sep,"newline")){const a=fe(t.start),o=t.key,l=t.sep;l.push(this.sourceToken),delete t.key,delete t.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:o,sep:l}]})}else r.length>0?t.sep=t.sep.concat(r,this.sourceToken):t.sep.push(this.sourceToken);else if(V(t.start,"newline"))Object.assign(t,{key:null,sep:[this.sourceToken]});else{const a=fe(t.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:null,sep:[this.sourceToken]}]})}else t.sep?t.value||i?e.items.push({start:r,key:null,sep:[this.sourceToken]}):V(t.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const a=this.flowScalar(this.type);i||t.value?(e.items.push({start:r,key:a,sep:[]}),this.onKeyLine=!0):t.sep?this.stack.push(a):(Object.assign(t,{key:a,sep:[]}),this.onKeyLine=!0);return}default:{const a=this.startBlockValue(e);if(a){i&&a.type!=="block-seq"&&V(t.start,"explicit-key-ind")&&e.items.push({start:r}),this.stack.push(a);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){var s;const t=e.items[e.items.length-1];switch(this.type){case"newline":if(t.value){const i="end"in t.value?t.value.end:void 0,r=Array.isArray(i)?i[i.length-1]:void 0;(r==null?void 0:r.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(t.start,e.indent)){const i=e.items[e.items.length-2],r=(s=i==null?void 0:i.value)==null?void 0:s.end;if(Array.isArray(r)){Array.prototype.push.apply(r,t.start),r.push(this.sourceToken),e.items.pop();return}}t.start.push(this.sourceToken)}return;case"anchor":case"tag":if(t.value||this.indent<=e.indent)break;t.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;t.value||V(t.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken);return}if(this.indent>e.indent){const i=this.startBlockValue(e);if(i){this.stack.push(i);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){const t=e.items[e.items.length-1];if(this.type==="flow-error-end"){let s;do yield*this.pop(),s=this.peek(1);while(s&&s.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!t||t.sep?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken);return;case"map-value-ind":!t||t.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!t||t.value?e.items.push({start:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const i=this.flowScalar(this.type);!t||t.value?e.items.push({start:[],key:i,sep:[]}):t.sep?this.stack.push(i):Object.assign(t,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}const s=this.startBlockValue(e);s?this.stack.push(s):(yield*this.pop(),yield*this.step())}else{const s=this.peek(2);if(s.type==="block-map"&&(this.type==="map-value-ind"&&s.indent===e.indent||this.type==="newline"&&!s.items[s.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&s.type!=="flow-collection"){const i=De(s),r=fe(i);pn(e);const a=e.end.splice(1,e.end.length);a.push(this.sourceToken);const o={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:r,key:e,sep:a}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=o}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let t=this.source.indexOf(`
`)+1;for(;t!==0;)this.onNewLine(this.offset+t),t=this.source.indexOf(`
`,t)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const t=De(e),s=fe(t);return s.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s}]}}case"map-value-ind":{this.onKeyLine=!0;const t=De(e),s=fe(t);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,t){return this.type!=="comment"||this.indent<=t?!1:e.every(s=>s.type==="newline"||s.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function Os(n){const e=n.prettyErrors!==!1;return{lineCounter:n.lineCounter||e&&new vs||null,prettyErrors:e}}function Jr(n,e={}){const{lineCounter:t,prettyErrors:s}=Os(e),i=new Yt(t==null?void 0:t.addNewLine),r=new zt(e),a=Array.from(r.compose(i.parse(n)));if(s&&t)for(const o of a)o.errors.forEach(ze(n,t)),o.warnings.forEach(ze(n,t));return a.length>0?a:Object.assign([],{empty:!0},r.streamInfo())}function As(n,e={}){const{lineCounter:t,prettyErrors:s}=Os(e),i=new Yt(t==null?void 0:t.addNewLine),r=new zt(e);let a=null;for(const o of r.compose(i.parse(n),!0,n.length))if(!a)a=o;else if(a.options.logLevel!=="silent"){a.errors.push(new re(o.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return s&&t&&(a.errors.forEach(ze(n,t)),a.warnings.forEach(ze(n,t))),a}function zr(n,e,t){let s;typeof e=="function"?s=e:t===void 0&&e&&typeof e=="object"&&(t=e);const i=As(n,t);if(!i)return null;if(i.warnings.forEach(r=>Gn(i.options.logLevel,r)),i.errors.length>0){if(i.options.logLevel!=="silent")throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:s},t))}function Yr(n,e,t){let s=null;if(typeof e=="function"||Array.isArray(e)?s=e:t===void 0&&e&&(t=e),typeof t=="string"&&(t=t.length),typeof t=="number"){const i=Math.round(t);t=i<1?void 0:i>8?{indent:8}:{indent:i}}if(n===void 0){const{keepUndefined:i}=t??e??{};if(!i)return}return new Ne(n,s,t).toString(t)}const vt=Object.freeze(Object.defineProperty({__proto__:null,Alias:Ze,CST:Vr,Composer:zt,Document:Ne,Lexer:Ss,LineCounter:vs,Pair:P,Parser:Yt,Scalar:A,Schema:ct,YAMLError:Gt,YAMLMap:D,YAMLParseError:re,YAMLSeq:ee,YAMLWarning:us,isAlias:le,isCollection:_,isDocument:Se,isMap:ve,isNode:L,isPair:T,isScalar:N,isSeq:Ee,parse:zr,parseAllDocuments:Jr,parseDocument:As,stringify:Yr,visit:Z,visitAsync:Xe},Symbol.toStringTag,{value:"Module"})),Re={fetchOrganization(n,e){e.getAttribute("name").setValue(ne.name),e.getAttribute("description").setValue(ne.description),e.getAttribute("phone").setValue(ne.phone),e.getAttribute("website").setValue(ne.website),e.getAttribute("email").setValue(ne.email);let t=e.getAttribute("socials").getTarget();for(const s in ne.socials){const i=ne.socials[s];let r=n.createConcept("social");r.getAttribute("name").setValue(s),r.getAttribute("handle").setValue(i),t.addElement(r)}},fetchProjects(n,e){fetch("https://raw.githubusercontent.com/geodes-sms/geodes-sms.github.io/main/_data/projects/funded.yml").then(t=>t.text()).then(t=>{const s=vt.parse(t);let i=e.getAttribute("projects").getTarget();i.removeAllElement(),s.forEach(r=>{let a=n.createConcept("project");const{name:o,description:l,startYear:c,endYear:h,funding:u,logo:f,partners:p=[]}=r;a.getAttribute("name").setValue(o),a.getAttribute("description").setValue(l),a.getAttribute("start-date").setValue(c),a.getAttribute("end-date").setValue(h),a.getAttribute("funding").setValue(u),a.getAttribute("logo").setValue(f);let b=a.getAttribute("partners").getTarget();Array.isArray(p)&&p.forEach(d=>{let m=n.createConcept("partner");m.getAttribute("name").setValue(d),b.addElement(m)}),i.addElement(a)})})},fetchTools(n,e){fetch("https://raw.githubusercontent.com/geodes-sms/geodes-sms.github.io/main/_data/projects/tools.yml").then(t=>t.text()).then(t=>{const s=vt.parse(t);let i=e.getAttribute("tools").getTarget();i.removeAllElement(),s.forEach(r=>{let a=n.createConcept("tool");const{name:o,description:l,startYear:c,url:h,logo:u,contributors:f=[]}=r;a.getAttribute("name").setValue(o),a.getAttribute("description").setValue(l),a.getAttribute("start-date").setValue(c),a.getAttribute("url").setValue(h),a.getAttribute("logo").setValue(u);let p=a.getAttribute("contributors").getTarget();f.forEach(b=>{let d=n.createConcept("partner");d.getAttribute("name").setValue(b),p.addElement(d)}),i.addElement(a)})})},fetchPeople(n,e){fetch("https://raw.githubusercontent.com/geodes-sms/geodes-sms.github.io/main/_data/people/people.yml").then(t=>t.text()).then(t=>{const s=vt.parse(t);let i=e.getAttribute("members").getTarget();i.removeAllElement(),s.forEach(r=>{let a=n.createConcept("person");const[o,l]=r.name.split(",");a.getAttribute("first-name").setValue(l),a.getAttribute("last-name").setValue(o),a.getAttribute("occupation").setValue(r.position),a.getAttribute("website").setValue(r.website),a.getAttribute("email").setValue(r.email),a.getAttribute("phone").setValue(r.phone),a.getAttribute("photo").setValue(`https://geodes.iro.umontreal.ca/images/people/people/${r.image}`),i.addElement(a)})})}};let dt=Gentleman.activateEditor(".app-editor")[0];dt.init({config:{header:!1},conceptModel:[ci,mi,Ei,gi],projectionModel:[Si,di,Ti,Li,$i]});dt.home.close();dt.exporter.close();const dn={general:"general",people:"people",projects:"project",tools:"tool"},Qr={general:"General information",people:"Members",projects:"Funded projects",tools:"Tools"},Wr={editorInstance:null,organization:null,container:null,menu:null,items:null,views:null,selectedItem:null,init(n,e){return this.container=n,this.items=new Map,this.views=new Map,this.editor=e,this.bindDOM(),this.bindEvents(),this.render(),this},get hasSelectedItem(){return M(this.selectedItem)},getItemName(n){return M(n)?n.dataset.cmsName:null},refresh(){this.container.dataset.item=this.hasSelectedItem?this.getItemName(this.selectedItem):""},render(){return this.instance?this:(this.organization=this.editor.createConcept("research-organization"),this.editorInstance=this.editor.createInstance(this.organization),this.editorInstance.changeSize("fullscreen"),this.selectItem("general"),this.refresh(),this)},selectItem(n){if(j(n)||!this.items.has(n))return!1;let e=this.items.get(n);return e===this.selectedItem?this:(this.selectedItem&&this.selectedItem.classList.remove("selected"),this.selectedItem=e,this.selectedItem.classList.add("selected"),this.updateView(),this)},updateView(){let n=this.getItemName(this.selectedItem);if(j(n)||!xt(dn,n))return;switch(n){case"general":Re.fetchOrganization(this.editor,this.organization);break;case"people":Re.fetchPeople(this.editor,this.organization);break;case"tools":Re.fetchTools(this.editor,this.organization);break;case"projects":Re.fetchProjects(this.editor,this.organization);break}let e=dn[n],t=this.editorInstance.projection,s=t.findView(e);if(s===-1)return!1;t.changeView(s),this.editorInstance.setTitle(`GEODES – ${Qr[n]}`),this.refresh()},bindDOM(){this.menu=Tn('[data-cms="menu"]'),ei('[data-cms="menu-item"]',this.menu).forEach(n=>{const{cmsName:e}=n.dataset;this.items.set(e,n)})},bindEvents(){const n=t=>M(t)&&t.dataset.cms==="menu-item",e=t=>n(t)?t:ti(t,n,3);this.menu.addEventListener("click",t=>{let s=e(t.target);M(s)&&this.selectItem(this.getItemName(s))})}};Wr.init(Tn(".page-body"),dt);
